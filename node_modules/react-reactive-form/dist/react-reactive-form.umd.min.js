!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("react"),require("prop-types")):"function"==typeof define&&define.amd?define(["exports","react","prop-types"],e):e(t.ReactiveForm={},t.React,t.PropTypes)}(this,function(t,u,e){"use strict";u=u&&u.hasOwnProperty("default")?u.default:u,e=e&&e.hasOwnProperty("default")?e.default:e;var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},a=function(){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}}(),s=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)},l=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e},c=function(){function t(){o(this,t),this.observers=[]}return a(t,[{key:"subscribe",value:function(t){this.observers.push(t)}},{key:"unsubscribe",value:function(e){this.observers=e?this.observers.filter(function(t){return t!==e?t:null}):[]}},{key:"next",value:function(e,t){var n=t||window;this.observers.forEach(function(t){t.call(n,e)})}}]),t}();function i(t,n){var r=new c;return t.then(function(t){var e;r.next((e=t,n?n(e):e))},function(t){r.next(t)}).then(null,function(t){throw t}),r}function h(t){return"function"==typeof t}var f=function(){return"undefined"!=typeof window&&window.navigator&&window.navigator.product&&"ReactNative"===window.navigator.product},d=function(t){return!!(t&&t.stopPropagation&&t.preventDefault)},r={ReactNative:{switch:{value:"value",onValueChange:"onChange",onBlur:"onBlur",onFocus:"onFocus",disabled:"disabled"},default:{value:"value",onChange:"onChange",onBlur:"onBlur",onFocus:"onFocus",editable:"enabled"}},default:{value:"value",onChange:"onChange",onBlur:"onBlur",onFocus:"onFocus",disabled:"disabled"}},v=function(t){return null==t?"":t},p=function(t){return f()?r.ReactNative[t]||r.ReactNative.default:r.default};var y=["strict","render","name","index","control","formState","options","parent","meta"];function g(t){return null==t||0===t.length}function _(t){return null!=t}function m(t){var e=t.reduce(function(t,e){return null!=e?Object.assign({},t,e):t},{});return 0===Object.keys(e).length?null:e}var C=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,k=function(){function t(){o(this,t)}return a(t,null,[{key:"min",value:function(n){return function(t){if(g(t.value)||g(n))return null;var e=parseFloat(t.value);return!isNaN(e)&&e<n?{min:{min:n,actual:e}}:null}}},{key:"max",value:function(n){return function(t){if(g(t.value)||g(n))return null;var e=parseFloat(t.value);return!isNaN(e)&&n<e?{max:{max:n,actual:e}}:null}}},{key:"required",value:function(t){return g(t.value)?{required:!0}:null}},{key:"requiredTrue",value:function(t){return!0===t.value?null:{required:!0}}},{key:"email",value:function(t){return g(t.value)?null:C.test(t.value)?null:{email:!0}}},{key:"minLength",value:function(n){return function(t){if(g(t.value))return null;var e=t.value?t.value.length:0;return e<n?{minLength:{requiredLength:n,actualLength:e}}:null}}},{key:"maxLength",value:function(n){return function(t){var e=t.value?t.value.length:0;return n<e?{maxLength:{requiredLength:n,actualLength:e}}:null}}},{key:"pattern",value:function(t){if(!t)return null;var e=void 0,n=void 0;return"string"==typeof t?(n="^"+t+"$",e=new RegExp(n)):(n=t.toString(),e=t),function(t){return g(t.value)?null:e.test(t.value)?null:{pattern:{requiredPattern:n,actualValue:t.value}}}}},{key:"compose",value:function(t){if(!t)return null;var n=t.filter(_);return 0===n.length?null:function(t){return m((e=t,n.map(function(t){return t(e)})));var e}}},{key:"composeAsync",value:function(t){if(!t)return null;var r=t.filter(_);return 0===r.length?null:function(t){var e,n=(e=t,r.map(function(t){return t(e)}));return i(Promise.all(n),m)}}}]),t}(),b="VALID",O="INVALID",V="PENDING",E="DISABLED";function A(t){return null!=t&&!Array.isArray(t)&&"object"===(void 0===t?"undefined":n(t))}function w(e){return e.validate?function(t){return e.validate(t)}:e}function S(e){return e.validate?function(t){return e.validate(t)}:e}function x(t){var e,n=A(t)?t.validators:t;return Array.isArray(n)?null!=(e=n)?k.compose(e.map(w)):null:n||null}function T(t,e){var n,r=A(e)?e.asyncValidators:t;return Array.isArray(r)?null!=(n=r)?k.composeAsync(n.map(S)):null:r||null}var P=function(){function n(t,e){o(this,n),this.validator=t,this.asyncValidator=e,this.touched=!1,this.submitted=!1,this.pristine=!0,this.meta={},this._pendingChange="change"!==this.updateOn,this._pendingDirty=!1,this._pendingTouched=!1,this._onDisabledChange=[],this.hasError=this.hasError.bind(this),this.getError=this.getError.bind(this),this.reset=this.reset.bind(this),this.get=this.get.bind(this),this.patchValue=this.patchValue.bind(this),this.setValue=this.setValue.bind(this)}return a(n,[{key:"setInitialStatus",value:function(){this.disabled?this.status=E:this.status=b}},{key:"disable",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};this.status=E,this.errors=null,this._forEachChild(function(t){t.disable({onlySelf:!0})}),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.next(this.value),this.statusChanges.next(this.status),this.stateChanges.next()),this._updateAncestors(!!t.onlySelf),this._onDisabledChange.forEach(function(t){return t(!0)})}},{key:"enable",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};this.status=b,this._forEachChild(function(t){t.enable({onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(!!t.onlySelf),this._onDisabledChange.forEach(function(t){return t(!1)})}},{key:"updateValueAndValidity",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};this.setInitialStatus(),this._updateValue(),this.enabled&&("submit"!==this.updateOn||this.submitted)&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),this.status!==b&&this.status!==V||this._runAsyncValidator(!0)),!1!==t.emitEvent&&(this.valueChanges.next(this.value),this.statusChanges.next(this.status),this.stateChanges.next()),this.parent&&!t.onlySelf&&this.parent.updateValueAndValidity(t)}},{key:"markAsTouched",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t),t.emitEvent&&this.stateChanges.next()}},{key:"markAsSubmitted",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};this.submitted=!0,this._forEachChild(function(t){t.markAsSubmitted()}),!1!==t.emitEvent&&this.stateChanges.next()}},{key:"markAsUnsubmitted",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};this.submitted=!1,this._forEachChild(function(t){t.markAsUnsubmitted({onlySelf:!0})}),!1!==t.emitEvent&&this.stateChanges.next()}},{key:"markAsPristine",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};this.pristine=!0,this._pendingDirty=!1,t.emitEvent&&this.stateChanges.next(),this._forEachChild(function(t){t.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}},{key:"markAsUntouched",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};this.touched=!1,this._pendingTouched=!1,this._forEachChild(function(t){t.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t),t.emitEvent&&this.stateChanges.next()}},{key:"markAsDirty",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};this.pristine=!1,t.emitEvent&&this.stateChanges.next(),this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}},{key:"markAsPending",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};this.status=V,this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}},{key:"setValidators",value:function(t){this.validator=x(t)}},{key:"setAsyncValidators",value:function(t){this.asyncValidator=T(t)}},{key:"setErrors",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};this.errors=t,this._updateControlsErrors(!1!==e.emitEvent)}},{key:"get",value:function(t){return e=this,r=".",null==(n=t)?null:(n instanceof Array||(n=n.split(r)),n instanceof Array&&0===n.length?null:n.reduce(function(t,e){return t instanceof j?t.controls[e]||null:t instanceof D&&t.at(e)||null},e));var e,n,r}},{key:"getError",value:function(t,e){var n=e?this.get(e):this;return n&&n.errors?n.errors[t]:null}},{key:"hasError",value:function(t,e){return!!this.getError(t,e)}},{key:"clearValidators",value:function(){this.validator=null}},{key:"clearAsyncValidators",value:function(){this.asyncValidator=null}},{key:"setParent",value:function(t){this._parent=t}},{key:"_updateAncestors",value:function(t){this._parent&&!t&&(this._parent.updateValueAndValidity(),this._parent._updatePristine(),this._parent._updateTouched())}},{key:"_anyControlsHaveStatus",value:function(e){return this._anyControls(function(t){return t.status===e})}},{key:"_calculateStatus",value:function(){return this._allControlsDisabled()?E:this.errors?O:this._anyControlsHaveStatus(V)?V:this._anyControlsHaveStatus(O)?O:b}},{key:"_runValidator",value:function(){return this.validator?this.validator(this):null}},{key:"_runAsyncValidator",value:function(e){var n=this;if(this.asyncValidator){this.status=V;var t=function(t){var e,n,r=(e=t)&&"function"==typeof e.then?i(t):t;if(!(n=r)||"function"!=typeof n.subscribe)throw new Error("Expected validator to return Promise or Observable.");return r}(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(function(t){return n.setErrors(t,{emitEvent:e})})}}},{key:"_cancelExistingSubscription",value:function(){this._asyncValidationSubscription&&this._asyncValidationSubscription.unsubscribe()}},{key:"_updatePristine",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}},{key:"_updateTouched",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}},{key:"_anyControlsDirty",value:function(){return this._anyControls(function(t){return t.dirty})}},{key:"_anyControlsUnsubmitted",value:function(){return this._anyControls(function(t){return!t.submitted})}},{key:"_anyControlsTouched",value:function(){return this._anyControls(function(t){return t.touched})}},{key:"_updateControlsErrors",value:function(t){this.status=this._calculateStatus(),t&&(this.statusChanges.next(),this.stateChanges.next()),this._parent&&this._parent._updateControlsErrors(t)}},{key:"_initObservables",value:function(){this.valueChanges=new c,this.statusChanges=new c,this.stateChanges=new c}},{key:"_forEachChild",value:function(t){}},{key:"_updateValue",value:function(){}},{key:"_allControlsDisabled",value:function(){}},{key:"_anyControls",value:function(){}},{key:"reset",value:function(t,e){}},{key:"setValue",value:function(){}},{key:"patchValue",value:function(){}},{key:"_registerOnCollectionChange",value:function(t){this._onCollectionChange=t}},{key:"_setUpdateStrategy",value:function(t){A(t)&&null!=t.updateOn&&(this._updateOn=t.updateOn)}},{key:"updateOn",get:function(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}},{key:"dirty",get:function(){return!this.pristine}},{key:"valid",get:function(){return this.status===b}},{key:"invalid",get:function(){return this.status===O}},{key:"pending",get:function(){return this.status===V}},{key:"parent",get:function(){return this._parent}},{key:"untouched",get:function(){return!this.touched}},{key:"enabled",get:function(){return this.status!==E}},{key:"disabled",get:function(){return this.status===E}},{key:"root",get:function(){for(var t=this;t._parent;)t=t._parent;return t}}]),n}(),F=function(t){function i(t,e,n){o(this,i);var r=l(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,x(e),T(n,e)));return r.formState=t,r.validatorsOrOpts=e,r._applyFormState(t),r._setUpdateStrategy(e),r._pendingChange=!0,r._pendingDirty=!1,r._pendingTouched=!1,r.active=!1,r.onValueChanges=new c,r.onBlurChanges=new c,r.updateValueAndValidity({onlySelf:!0,emitEvent:!1}),r._initObservables(),r.onChange=function(t){var e=function(t){if(d(t))switch(t.target.type){case"checkbox":return t.target.checked;case"select-multiple":if(t.target.options){for(var e=t.target.options,n=[],r=0,i=e.length;r<i;r++)e[r].selected&&n.push(e[r].value);return n}return t.target.value;default:return f()?t.nativeEvent.text:t.target.value}return t}(t),n=e!==r.value;"change"!==r.updateOn?(r._pendingValue=e,r._pendingChange=!0,n&&!r._pendingDirty&&(r._pendingDirty=!0),r.stateChanges.next()):(n&&!r.dirty&&r.markAsDirty(),r.setValue(e)),r.onValueChanges.next(e)},r.onBlur=function(){if(r.active=!1,"blur"===r.updateOn)r._pendingDirty&&!r.dirty&&r.markAsDirty(),r.touched||r.markAsTouched(),r.setValue(r._pendingValue);else if("submit"===r.updateOn)r._pendingTouched=!0;else{var t=!r.touched;r.touched||r.markAsTouched(),t&&r.stateChanges.next()}r.onBlurChanges.next(r._pendingValue)},r.onFocus=function(){r.active=!0,r.stateChanges.next()},r.handler=function(t,e){return function(t,e,n){var r={},i=p(t);Object.keys(i).forEach(function(t){var e=null;e="value"===t?"change"!==n.updateOn?v(n._pendingValue):v(n.value):n[i[t]],r[t]=e});var o=r;switch(t){case"checkbox":o.checked=!!o.value,o.type=t;break;case"radio":o.checked=o.value===e,o.value=e,o.type=t}return o}(t,e,r)},r}return s(i,P),a(i,[{key:"setValue",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};this.value=this._pendingValue=t,this.updateValueAndValidity(e)}},{key:"patchValue",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};this.setValue(t,e)}},{key:"reset",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}},{key:"_anyControls",value:function(t){return!1}},{key:"_allControlsDisabled",value:function(){return this.disabled}},{key:"_isBoxedValue",value:function(t){return"object"===(void 0===t?"undefined":n(t))&&null!==t&&2===Object.keys(t).length&&"value"in t&&"disabled"in t}},{key:"_applyFormState",value:function(t){this._isBoxedValue(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}},{key:"_syncPendingControls",value:function(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange))&&(this.setValue(this._pendingValue),!(this._pendingChange=!1))}},{key:"inactive",get:function(){return!this.active}}]),i}(),j=function(t){function i(t,e,n){o(this,i);var r=l(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,x(e),T(n,e)));return r.controls=t,r.validatorOrOpts=e,r._initObservables(),r._setUpdateStrategy(e),r._setUpControls(),r.updateValueAndValidity({onlySelf:!0,emitEvent:!1}),r.handleSubmit=function(t){t&&t.preventDefault(),r._anyControlsUnsubmitted()&&r.markAsSubmitted({emitEvent:!1}),r._syncPendingControls()||r.updateValueAndValidity()},r}return s(i,P),a(i,[{key:"contains",value:function(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}},{key:"registerControl",value:function(t,e){return this.controls[t]?this.controls[t]:((this.controls[t]=e).setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}},{key:"addControl",value:function(t,e){this.registerControl(t,e),this.updateValueAndValidity(),this._onCollectionChange()}},{key:"removeControl",value:function(t){this.controls[t]&&this.controls[t]._registerOnCollectionChange(function(){}),delete this.controls[t],this.updateValueAndValidity(),this._onCollectionChange()}},{key:"setControl",value:function(t,e){this.controls[t]&&this.controls[t]._registerOnCollectionChange(function(){}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity(),this._onCollectionChange()}},{key:"setValue",value:function(e){var n=this,r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};this._checkAllValuesPresent(e),Object.keys(e).forEach(function(t){n._throwIfControlMissing(t),n.controls[t].setValue(e[t],{onlySelf:!0,emitEvent:r.emitEvent})}),this.updateValueAndValidity(r)}},{key:"reset",value:function(){var n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};this._forEachChild(function(t,e){t.reset(n[e],{onlySelf:!0,emitEvent:r.emitEvent})}),this.updateValueAndValidity(r),this.markAsUnsubmitted(),this._updatePristine(r),this._updateTouched(r)}},{key:"patchValue",value:function(e){var n=this,r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};Object.keys(e).forEach(function(t){n.controls[t]&&n.controls[t].patchValue(e[t],{onlySelf:!0,emitEvent:r.emitEvent})}),this.updateValueAndValidity(r)}},{key:"getRawValue",value:function(){return this._reduceChildren({},function(t,e,n){return t[n]=e instanceof F?e.value:e.getRawValue(),t})}},{key:"_forEachChild",value:function(e){var n=this;Object.keys(this.controls).forEach(function(t){return e(n.controls[t],t)})}},{key:"_onCollectionChange",value:function(){}},{key:"_anyControls",value:function(n){var r=this,i=!1;return this._forEachChild(function(t,e){i=i||r.contains(e)&&n(t)}),i}},{key:"_updateValue",value:function(){this.value=this._reduceValue()}},{key:"_reduceValue",value:function(){var r=this;return this._reduceChildren({},function(t,e,n){return(e.enabled||r.disabled)&&(t[n]=e.value),t})}},{key:"_reduceErrors",value:function(){var r=this;return this._reduceChildren({},function(t,e,n){return(e.enabled||r.disabled)&&(t[n]=e.errors),t})}},{key:"_reduceChildren",value:function(t,n){var r=t;return this._forEachChild(function(t,e){r=n(r,t,e)}),r}},{key:"_setUpControls",value:function(){var e=this;this._forEachChild(function(t){t.setParent(e),t._registerOnCollectionChange(e._onCollectionChange)})}},{key:"_allControlsDisabled",value:function(){var t=!0,e=!1,n=void 0;try{for(var r,i=Object.keys(this.controls)[Symbol.iterator]();!(t=(r=i.next()).done);t=!0){var o=r.value;if(this.controls[o].enabled)return!1}}catch(t){e=!0,n=t}finally{try{!t&&i.return&&i.return()}finally{if(e)throw n}}return 0<Object.keys(this.controls).length||this.disabled}},{key:"_checkAllValuesPresent",value:function(n){this._forEachChild(function(t,e){if(void 0===n[e])throw new Error("Must supply a value for form control with name: '"+e+"'.")})}},{key:"_throwIfControlMissing",value:function(t){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet.\n      ");if(!this.controls[t])throw new Error("Cannot find form control with name: "+t+".")}},{key:"_syncPendingControls",value:function(){var t=this._reduceChildren(!1,function(t,e){return!!e._syncPendingControls()||t});return t&&this.updateValueAndValidity(),t}}]),i}(),D=function(t){function i(t,e,n){o(this,i);var r=l(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,x(e),T(n,e)));return r.controls=t,r.validatorOrOpts=e,r._initObservables(),r._setUpdateStrategy(e),r._setUpControls(),r.updateValueAndValidity({onlySelf:!0,emitEvent:!1}),r.handleSubmit=function(t){t&&t.preventDefault(),r._anyControlsUnsubmitted()&&r.markAsSubmitted({emitEvent:!1}),r._syncPendingControls()||r.updateValueAndValidity()},r}return s(i,P),a(i,[{key:"at",value:function(t){return this.controls[t]}},{key:"push",value:function(t){this.controls.push(t),this._registerControl(t),this.updateValueAndValidity(),this._onCollectionChange()}},{key:"insert",value:function(t,e){this.controls.splice(t,0,e),this._registerControl(e),this.updateValueAndValidity(),this._onCollectionChange()}},{key:"removeAt",value:function(t){this.controls[t]&&this.controls[t]._registerOnCollectionChange(function(){}),this.controls.splice(t,1),this.updateValueAndValidity(),this._onCollectionChange()}},{key:"setControl",value:function(t,e){this.controls[t]&&this.controls[t]._registerOnCollectionChange(function(){}),this.controls.splice(t,1),e&&(this.controls.splice(t,0,e),this._registerControl(e)),this.updateValueAndValidity(),this._onCollectionChange()}},{key:"setValue",value:function(t){var n=this,r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};this._checkAllValuesPresent(t),t.forEach(function(t,e){n._throwIfControlMissing(e),n.at(e).setValue(t,{onlySelf:!0,emitEvent:r.emitEvent})}),this.updateValueAndValidity(r)}},{key:"patchValue",value:function(t){var n=this,r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};t.forEach(function(t,e){n.at(e)&&n.at(e).patchValue(t,{onlySelf:!0,emitEvent:r.emitEvent})}),this.updateValueAndValidity(r)}},{key:"reset",value:function(){var n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};this._forEachChild(function(t,e){t.reset(n[e],{onlySelf:!0,emitEvent:r.emitEvent})}),this.updateValueAndValidity(r),this.markAsUnsubmitted(),this._updatePristine(r),this._updateTouched(r)}},{key:"getRawValue",value:function(){return this.controls.map(function(t){return t instanceof F?t.value:t.getRawValue()})}},{key:"_syncPendingControls",value:function(){var t=this.controls.reduce(function(t,e){return!!e._syncPendingControls()||t},!1);return t&&this.updateValueAndValidity(),t}},{key:"_throwIfControlMissing",value:function(t){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet.\n      ");if(!this.at(t))throw new Error("Cannot find form control at index "+t)}},{key:"_forEachChild",value:function(n){this.controls.forEach(function(t,e){n(t,e)})}},{key:"_updateValue",value:function(){var e=this;this.value=this.controls.filter(function(t){return t.enabled||e.disabled}).map(function(t){return t.value})}},{key:"_anyControls",value:function(e){return this.controls.some(function(t){return t.enabled&&e(t)})}},{key:"_setUpControls",value:function(){var e=this;this._forEachChild(function(t){return e._registerControl(t)})}},{key:"_checkAllValuesPresent",value:function(n){this._forEachChild(function(t,e){if(void 0===n[e])throw new Error("Must supply a value for form control at index: "+e+".")})}},{key:"_allControlsDisabled",value:function(){var t=!0,e=!1,n=void 0;try{for(var r,i=this.controls[Symbol.iterator]();!(t=(r=i.next()).done);t=!0){if(r.value.enabled)return!1}}catch(t){e=!0,n=t}finally{try{!t&&i.return&&i.return()}finally{if(e)throw n}}return 0<this.controls.length||this.disabled}},{key:"_registerControl",value:function(t){t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)}},{key:"_onCollectionChange",value:function(){}},{key:"length",get:function(){return this.controls.length}}]),i}();function U(t){if(t instanceof F||t instanceof j||t instanceof D)return t;if(Array.isArray(t)){var e=t[0],n=1<t.length?t[1]:null,r=2<t.length?t[2]:null,i=3<t.length?t[3]:null;return L.control(e,n,r,i)}return L.control(t)}var L=function(){function t(){o(this,t)}return a(t,null,[{key:"group",value:function(t,e){var n,r,i=(n=t,r={},Object.keys(n).forEach(function(t){r[t]=U(n[t])}),r),o=null!=e?e.validators:null,a=null!=e?e.asyncValidators:null,u=null!=e?e.updateOn:null;return new j(i,{validators:o,asyncValidators:a,updateOn:u})}},{key:"array",value:function(t,e){var n=t.map(function(t){return U(t)}),r=null!=e?e.validators:null,i=null!=e?e.asyncValidators:null,o=null!=e?e.updateOn:null;return new D(n,{validators:r,asyncValidators:i,updateOn:o})}},{key:"control",value:function(t,e,n,r){return new F(t,{validators:e,asyncValidators:n,updateOn:r})}}]),t}(),R=function(t){function e(){return o(this,e),l(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return s(e,t),a(e,[{key:"componentDidMount",value:function(){var t=this.props.control;this.addListener(t)}},{key:"componentDidUpdate",value:function(t){var e=this.props.control;e!==t.control&&(this.removeListener(e),this.addListener(e))}},{key:"addListener",value:function(t){var e=this;t&&t.stateChanges.subscribe(function(){e.forceUpdate()})}},{key:"removeListener",value:function(e){e&&e.stateChanges.observers&&e.stateChanges.observers.forEach(function(t){e.stateChanges.unsubscribe(t)})}},{key:"componentWillUnmount",value:function(){var t=this.props.control;this.removeListener(t)}},{key:"shouldComponentUpdate",value:function(t){return!t.strict}},{key:"getComponent",value:function(){var t=this.props,e=t.render,n=t.children,r=t.control;return r?h(n)?n(r):h(e)?e(r):null:null}},{key:"render",value:function(){return this.getComponent()}}]),e}(u.Component);R.defaultProps={strict:!0},R.propTypes={strict:e.bool,control:e.oneOfType([e.instanceOf(F),e.instanceOf(D),e.instanceOf(j)]).isRequired,render:e.func};var B=function(t,e,n){switch(t){case"FormGroup":return new j({},e);case"FormArray":return new D([],e);case"FormControl":return new F(n,e);default:return null}},M=function(t,e,n){var r=t.name,i=t.parent,o=t.options,a=t.index,u=t.control,s=t.formState,l=t.meta,c=i||e.parentControl,h=null;if(u)"FormGroup"===n&&u instanceof j?h=u:"FormArray"===n&&u instanceof D?h=u:"FormControl"===n&&u instanceof F&&(h=u);else if(r)c&&c instanceof j&&(c.get(r)||c.addControl(r,B(n,o,s)),h=c.get(r));else if(c instanceof D){var f=void 0!==a?a:c.controls.length;c.insert(f,B(n,o,s)),h=c.at(f)}else"FormGroup"!==n&&"FormArray"!==n||(h=B(n,o,s));return h&&l&&(h.meta=l),h},q=function(t){function r(t,e){o(this,r);var n=l(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,t,e));return n.control=M(t,e,"FormGroup"),n}return s(r,t),a(r,[{key:"getChildContext",value:function(){return{parentControl:this.control}}},{key:"render",value:function(){var t=this.props,e=t.strict,n=t.children,r=t.render,i={control:this.control,strict:e,render:r||n||null};return u.createElement(R,i)}}]),r}(u.Component);q.childContextTypes={parentControl:e.oneOfType([e.instanceOf(D),e.instanceOf(j)])},q.contextTypes={parentControl:e.oneOfType([e.instanceOf(D),e.instanceOf(j)])},q.defaultProps={strict:!0},q.propTypes={strict:e.bool,render:e.func,name:e.string,index:e.number,control:e.instanceOf(j),options:e.shape({validators:e.oneOfType([e.func,e.arrayOf(e.func)]),asyncValidators:e.oneOfType([e.func,e.arrayOf(e.func)]),updateOn:e.oneOf(["change","blur","submit"])}),parent:e.oneOfType([e.instanceOf(D),e.instanceOf(j)]),meta:e.object};var I=function(t){function r(t,e){o(this,r);var n=l(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,t,e));return n.control=M(t,e,"FormControl"),n}return s(r,t),a(r,[{key:"componentDidUpdate",value:function(t){this.props.name!==t.name&&(this.control=M(this.props,this.context,"FormControl"))}},{key:"render",value:function(){var t=this.props,e=t.strict,n=t.children,r=t.render,i={control:this.control,strict:e,render:r||n||null};return u.createElement(R,i)}}]),r}(u.Component);I.defaultProps={strict:!0},I.propTypes={strict:e.bool,render:e.func,name:e.string,index:e.number,control:e.instanceOf(F),formState:e.oneOfType([e.shape({value:e.any,disabled:e.bool}),e.any]),options:e.shape({validators:e.oneOfType([e.func,e.arrayOf(e.func)]),asyncValidators:e.oneOfType([e.func,e.arrayOf(e.func)]),updateOn:e.oneOf(["change","blur","submit"])}),parent:e.oneOfType([e.instanceOf(D),e.instanceOf(j)]),meta:e.object},I.contextTypes={parentControl:e.oneOfType([e.instanceOf(D),e.instanceOf(j)])};var N=function(t){function r(t,e){o(this,r);var n=l(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,t,e));return n.control=M(t,e,"FormArray"),n}return s(r,t),a(r,[{key:"getChildContext",value:function(){return{parentControl:this.control}}},{key:"render",value:function(){var t=this.props,e=t.strict,n=t.children,r=t.render,i={control:this.control,strict:e,render:r||n||null};return u.createElement(R,i)}}]),r}(u.Component);N.childContextTypes={parentControl:e.oneOfType([e.instanceOf(D),e.instanceOf(j)])},N.contextTypes={parentControl:e.oneOfType([e.instanceOf(D),e.instanceOf(j)])},N.defaultProps={strict:!0},N.propTypes={strict:e.bool,render:e.func,name:e.string,index:e.number,control:e.instanceOf(D),options:e.shape({validators:e.oneOfType([e.func,e.arrayOf(e.func)]),asyncValidators:e.oneOfType([e.func,e.arrayOf(e.func)]),updateOn:e.oneOf(["change","blur","submit"])}),parent:e.oneOfType([e.instanceOf(D),e.instanceOf(j)]),meta:e.object};var G="$field_",W=function(t){function n(t){o(this,n);var e=l(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,t));return e.form=null,e}return s(n,t),a(n,[{key:"componentDidMount",value:function(){this.props.onMount(this.form)}},{key:"componentDidUpdate",value:function(){this.props.onMount(this.form)}},{key:"shouldComponentUpdate",value:function(t){return t.fieldConfig!==this.props.fieldConfig}},{key:"componentWillUnmount",value:function(){(0,this.props.onUnmount)()}},{key:"configureForm",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"FormGroup",e=this.props.fieldConfig;this.form=M(e,{},t)}},{key:"setControl",value:function(e,n){var r,i,o=this,t=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,a=(i={},(r=e)&&Object.keys(r).forEach(function(t){-1<y.indexOf(t)&&(i[t]=r[t])}),i);return a.key=n,t&&(a.name=t),t&&t.startsWith(G)||"string"==typeof e.index&&e.index.startsWith(G)?!1===e.isStatic?u.createElement(R,Object.assign({},{control:this.form},a)):a.render():e.controls?e.controls instanceof Array?(this.form||(this.configureForm("FormArray"),a.control=this.form),u.createElement(N,Object.assign({},a,{render:function(){return e.controls.map(function(t,e){return o.setControl(t,n+"_"+e)})}}))):e.controls instanceof Object?(this.form||(this.configureForm(),a.control=this.form),u.createElement(q,Object.assign({},a,{render:function(){return Object.keys(e.controls).map(function(t){return o.setControl(e.controls[t],t,t)})}}))):null:u.createElement(I,a)}},{key:"generateFields",value:function(){this.form=null;var t=this.props.fieldConfig;return t.controls?this.setControl(t,"my_form"+"_"+(new Date).getTime()):null}},{key:"render",value:function(){return this.props.fieldConfig?this.generateFields():null}}]),n}(u.Component);W.propTypes={fieldConfig:e.shape({controls:e.oneOfType([e.object,e.array]).isRequired,strict:e.bool,render:e.func,name:e.string,index:e.number,control:e.oneOfType([e.instanceOf(D),e.instanceOf(j)]),options:e.shape({validators:e.oneOfType([e.func,e.arrayOf(e.func)]),asyncValidators:e.oneOfType([e.func,e.arrayOf(e.func)]),updateOn:e.oneOf(["change","blur","submit"])}),parent:e.oneOfType([e.instanceOf(D),e.instanceOf(j)]),meta:e.object}).isRequired,onMount:e.func,onUnmount:e.func},W.defaultProps={onMount:function(){return null},onUnmount:function(){return null}},t.FormBuilder=L,t.FormGroup=j,t.FormControl=F,t.FormArray=D,t.Validators=k,t.Field=R,t.FieldGroup=q,t.FieldControl=I,t.FieldArray=N,t.FormGenerator=W,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=react-reactive-form.umd.min.js.map
