{"ast":null,"code":"import _defineProperty from\"/home/xhesina/Desktop/courier-server/src/main/react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _classCallCheck from\"/home/xhesina/Desktop/courier-server/src/main/react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/xhesina/Desktop/courier-server/src/main/react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/home/xhesina/Desktop/courier-server/src/main/react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/home/xhesina/Desktop/courier-server/src/main/react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/xhesina/Desktop/courier-server/src/main/react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import axios from\"axios\";import TextField from\"@material-ui/core/TextField\";import Grid from\"@material-ui/core/Grid\";import Button from\"@material-ui/core/Button\";import Card from\"@material-ui/core/Card\";import CardContent from\"@material-ui/core/CardContent\";import Divider from\"@material-ui/core/Divider\";import{withStyles}from\"@material-ui/styles\";import Snackbar from\"@material-ui/core/Snackbar\";var styles=function styles(theme){return{root:{maxWidth:500,width:'90%',margin:\"100px auto\"},bullet:{display:\"inline-block\",margin:\"0 2px\",transform:\"scale(0.8)\"},title:{fontSize:14},pos:{marginBottom:12}};};var Login=/*#__PURE__*/function(_Component){_inherits(Login,_Component);var _super=_createSuper(Login);function Login(props){var _this;_classCallCheck(this,Login);_this=_super.call(this,props);_this.redirectToRegister=function(){_this.props.history.push(\"/register\");};_this.handleClose=function(){_this.setState({open:false});};_this.state={username:\"\",password:\"\",open:false,vertical:\"top\",horizontal:\"center\",message:\"\"};_this.handleSubmit=_this.handleSubmit.bind(_assertThisInitialized(_this));_this.handleChange=_this.handleChange.bind(_assertThisInitialized(_this));return _this;}_createClass(Login,[{key:\"handleChange\",value:function handleChange(event){this.setState(_defineProperty({},event.target.name,event.target.value));}},{key:\"handleSubmit\",value:function handleSubmit(event){var _this2=this;var _this$state=this.state,username=_this$state.username,password=_this$state.password;var body={username:username,password:password};axios.post(\"/login\",body,{\"Content-Type\":\"application/json\"}).then(function(response){var accessToken=response.headers.authorization;var username=JSON.parse(response.config.data).username;localStorage.setItem(\"token\",accessToken);localStorage.setItem(\"user\",username);_this2.setState({open:true,vertical:\"top\",horizontal:\"right\",message:\"Loged in successfully\"});_this2.props.history.push(\"/\");}).catch(function(error){console.log(\"login error\",error);_this2.setState({open:true,vertical:\"top\",horizontal:\"right\",message:\"Username or password is incorrect!\"});});event.preventDefault();}},{key:\"render\",value:function render(){var _this$state2=this.state,username=_this$state2.username,password=_this$state2.password,open=_this$state2.open,vertical=_this$state2.vertical,horizontal=_this$state2.horizontal,message=_this$state2.message;var classes=this.props.classes;return/*#__PURE__*/React.createElement(Card,{className:classes.root,variant:\"outlined\"},/*#__PURE__*/React.createElement(CardContent,null,/*#__PURE__*/React.createElement(\"div\",{style:{display:\"inline\"}},/*#__PURE__*/React.createElement(\"p\",{style:{fontSize:\"22px\"}},\"Log in\"),/*#__PURE__*/React.createElement(\"div\",{style:{color:\"#bb91fd\",cursor:\"pointer\"},onClick:this.redirectToRegister},\"Register\"),/*#__PURE__*/React.createElement(Divider,null),/*#__PURE__*/React.createElement(\"form\",{onSubmit:this.handleSubmit},/*#__PURE__*/React.createElement(Grid,{container:true,spacing:3},/*#__PURE__*/React.createElement(Grid,{item:true,xs:12,style:{marginTop:'30px'}},/*#__PURE__*/React.createElement(TextField,{style:{padding:\"10px\",width:\"90%\"},id:\"standard-secondary\",name:\"username\",value:username,onChange:this.handleChange,color:\"secondary\",label:\"username\",required:true})),/*#__PURE__*/React.createElement(Grid,{item:true,xs:12},/*#__PURE__*/React.createElement(TextField,{style:{padding:\"10px\",width:\"90%\"},id:\"standard-secondary\",type:\"password\",name:\"password\",value:password,onChange:this.handleChange,color:\"secondary\",label:\"Password\",required:true}))),/*#__PURE__*/React.createElement(Grid,{item:true,xs:12,style:{paddingTop:\"30px\"}},/*#__PURE__*/React.createElement(Button,{variant:\"contained\",color:\"secondary\",type:\"submit\"},\"Login\"))),/*#__PURE__*/React.createElement(Snackbar,{anchorOrigin:{vertical:vertical,horizontal:horizontal},open:open,onClose:this.handleClose,message:message,key:vertical+horizontal}))));}}]);return Login;}(Component);export default withStyles(styles)(Login);","map":{"version":3,"sources":["/home/xhesina/Desktop/courier-server/src/main/react-app/src/auth/Login.js"],"names":["React","Component","axios","TextField","Grid","Button","Card","CardContent","Divider","withStyles","Snackbar","styles","theme","root","maxWidth","width","margin","bullet","display","transform","title","fontSize","pos","marginBottom","Login","props","redirectToRegister","history","push","handleClose","setState","open","state","username","password","vertical","horizontal","message","handleSubmit","bind","handleChange","event","target","name","value","body","post","then","response","accessToken","headers","authorization","JSON","parse","config","data","localStorage","setItem","catch","error","console","log","preventDefault","classes","color","cursor","marginTop","padding","paddingTop"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport axios from \"axios\";\nimport TextField from \"@material-ui/core/TextField\";\nimport Grid from \"@material-ui/core/Grid\";\nimport Button from \"@material-ui/core/Button\";\nimport Card from \"@material-ui/core/Card\";\nimport CardContent from \"@material-ui/core/CardContent\";\nimport Divider from \"@material-ui/core/Divider\";\nimport { withStyles } from \"@material-ui/styles\";\nimport Snackbar from \"@material-ui/core/Snackbar\";\n\nconst styles = (theme) => ({\n  root: {\n    maxWidth: 500,\n    width: '90%',\n    margin: \"100px auto\",\n  },\n  bullet: {\n    display: \"inline-block\",\n    margin: \"0 2px\",\n    transform: \"scale(0.8)\",\n  },\n  title: {\n    fontSize: 14,\n  },\n  pos: {\n    marginBottom: 12,\n  },\n});\n\nclass Login extends Component {\n  redirectToRegister = () => {\n    this.props.history.push(\"/register\");\n  };\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      username: \"\",\n      password: \"\",\n      open: false,\n      vertical: \"top\",\n      horizontal: \"center\",\n      message:\"\"\n    };\n\n    this.handleSubmit = this.handleSubmit.bind(this);\n    this.handleChange = this.handleChange.bind(this);\n  }\n\n  handleChange(event) {\n    this.setState({\n      [event.target.name]: event.target.value,\n    });\n  }\n\n  handleSubmit(event) {\n    const { username, password } = this.state;\n    let body = {\n      username: username,\n      password: password,\n    };\n    axios\n      .post(\"/login\", body, { \"Content-Type\": \"application/json\" })\n      .then((response) => {\n        let accessToken = response.headers.authorization;\n        let username = JSON.parse(response.config.data).username\n        localStorage.setItem(\"token\", accessToken);\n        localStorage.setItem(\"user\", username);\n        this.setState({ open: true, vertical: \"top\", horizontal: \"right\",message:\"Loged in successfully\" });\n        this.props.history.push(\"/\");\n      })\n      .catch((error) => {\n        console.log(\"login error\", error);\n        this.setState({ open: true, vertical: \"top\", horizontal: \"right\",message:\"Username or password is incorrect!\" });\n      });\n    event.preventDefault();\n  }\n  handleClose = () => {\n    this.setState({ open: false });\n  };\n\n  render() {\n    const { username, password, open, vertical, horizontal,message } = this.state;\n    const { classes } = this.props;\n    return (\n      <Card className={classes.root} variant=\"outlined\">\n        <CardContent>\n          <div style={{ display: \"inline\" }}>\n            <p style={{ fontSize: \"22px\" }}>Log in</p>\n            <div\n              style={{ color: \"#bb91fd\", cursor: \"pointer\" }}\n              onClick={this.redirectToRegister}\n            >\n              Register\n            </div>\n            <Divider />\n            <form onSubmit={this.handleSubmit}>\n              <Grid container spacing={3}>\n                <Grid item xs={12} style={{marginTop: '30px'}}>\n                  <TextField\n                    style={{ padding: \"10px\", width: \"90%\" }}\n                    id=\"standard-secondary\"\n                    name=\"username\"\n                    value={username}\n                    onChange={this.handleChange}\n                    color=\"secondary\"\n                    label=\"username\"\n                    required\n                  />\n                </Grid>\n                <Grid item xs={12}>\n                  <TextField\n                    style={{ padding: \"10px\", width: \"90%\" }}\n                    id=\"standard-secondary\"\n                    type=\"password\"\n                    name=\"password\"\n                    value={password}\n                    onChange={this.handleChange}\n                    color=\"secondary\"\n                    label=\"Password\"\n                    required\n                  />\n                </Grid>\n              </Grid>\n              <Grid item xs={12} style={{ paddingTop: \"30px\" }}>\n                <Button variant=\"contained\" color=\"secondary\" type=\"submit\">\n                  Login\n                </Button>\n              </Grid>\n            </form>\n            <Snackbar\n              anchorOrigin={{ vertical, horizontal }}\n              open={open}\n              onClose={this.handleClose}\n              message={message}\n              key={vertical + horizontal}\n            />\n          </div>\n        </CardContent>\n      </Card>\n    );\n  }\n}\nexport default withStyles(styles)(Login);\n"]},"metadata":{},"sourceType":"module"}