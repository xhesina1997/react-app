{"ast":null,"code":"import _defineProperty from\"/home/xhesina/Desktop/courier-server/src/main/react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _classCallCheck from\"/home/xhesina/Desktop/courier-server/src/main/react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/xhesina/Desktop/courier-server/src/main/react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/home/xhesina/Desktop/courier-server/src/main/react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/home/xhesina/Desktop/courier-server/src/main/react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/xhesina/Desktop/courier-server/src/main/react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import axios from\"axios\";import Table from\"@material-ui/core/Table\";import TableBody from\"@material-ui/core/TableBody\";import TableCell from\"@material-ui/core/TableCell\";import TableContainer from\"@material-ui/core/TableContainer\";import TableHead from\"@material-ui/core/TableHead\";import TableRow from\"@material-ui/core/TableRow\";import Paper from\"@material-ui/core/Paper\";import DialogTitle from\"@material-ui/core/DialogTitle\";import Dialog from\"@material-ui/core/Dialog\";import DialogContent from\"@material-ui/core/DialogContent\";import Chip from\"@material-ui/core/Chip\";import Select from\"@material-ui/core/Select\";import Divider from\"@material-ui/core/Divider\";import TextField from\"@material-ui/core/TextField\";import MenuItem from\"@material-ui/core/MenuItem\";import Button from\"@material-ui/core/Button\";import PrintIcon from'@material-ui/icons/Print';import PropTypes from'prop-types';import{withStyles}from\"@material-ui/styles\";import{withRouter}from'react-router-dom';var styles=function styles(theme){return{table:{minWidth:650}};};var Tickets=/*#__PURE__*/function(_Component){_inherits(Tickets,_Component);var _super=_createSuper(Tickets);function Tickets(props){var _this;_classCallCheck(this,Tickets);_this=_super.call(this,props);_this.goToPrintedForm=function(e,ticket){e.stopPropagation();_this.props.history.push({pathname:\"/print?ticket=\".concat(ticket.id),state:{ticket:ticket.id}});window.location.reload();};_this._handleTextFieldChange=function(e){_this.setState(_defineProperty({},e.target.name,e.target.value));};_this.changeStatus=function(e,ticket){e.stopPropagation();_this.setState({openStatusDialog:true});_this.setState({selectedTicketStatus:ticket});_this.setState({comment:\"\"});_this.setState({distributingState:false});axios.get(\"/cargoState\").then(function(response){console.log(response);_this.setState({cargoStates:response.data});}).catch(function(error){console.log(error);});};_this.handleClickOpen=function(ticket){_this.setState({open:true});_this.setState({selectedValue:ticket});};_this.handleClose=function(value){_this.setState({open:false});_this.setState({openStatusDialog:false});};_this.handleChange=function(event){_this.setState({status:event.target.value});if(event.target.value.state===\"DISTRIBUTING\"){_this.setState({distributingState:true});axios.get(\"/user/authority\").then(function(response){console.log(response);_this.setState({couriers:response.data});}).catch(function(error){console.log(error);});}else _this.setState({distributingState:false});};_this.handleCourierChange=function(event){_this.setState({courier:event.target.value});};_this.state={tickets:[],open:false,openStatusDialog:false,selectedValue:{},selectedTicketStatus:{},searchValue:\"\",cargoStates:[],status:{},distributingState:false,couriers:[],courier:\"\",comment:\"\"};_this.handleClickOpen=_this.handleClickOpen.bind(_assertThisInitialized(_this));_this._handleTextFieldChange=_this._handleTextFieldChange.bind(_assertThisInitialized(_this));_this.changeCargoStatus=_this.changeCargoStatus.bind(_assertThisInitialized(_this));return _this;}_createClass(Tickets,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;axios.get(\"/ticket\").then(function(response){_this2.setState({tickets:response.data});}).catch(function(error){console.log(error);});}},{key:\"changeCargoStatus\",value:function changeCargoStatus(event){var _this3=this;var _this$state=this.state,comment=_this$state.comment,courier=_this$state.courier,selectedTicketStatus=_this$state.selectedTicketStatus,status=_this$state.status;var body={cargoStateId:status.id,comment:comment,ticketId:selectedTicketStatus.id,assignedId:courier.id};axios.post(\"/ticketProgress\",body,{\"Content-Type\":\"application/json\"}).then(function(response){console.log(response);_this3.setState({openStatusDialog:false});axios.get(\"/ticket\").then(function(response){_this3.setState({tickets:response.data});}).catch(function(error){console.log(error);});}).catch(function(error){console.log(\"login error\",error);});}},{key:\"render\",value:function render(){var _this4=this,_selectedValue$ticket,_selectedValue$ticket2,_selectedTicketStatus,_selectedTicketStatus2,_selectedTicketStatus3,_selectedTicketStatus4,_selectedTicketStatus5,_selectedTicketStatus6,_selectedTicketStatus7,_selectedTicketStatus8,_selectedTicketStatus9,_selectedTicketStatus10,_selectedTicketStatus11,_selectedTicketStatus12,_selectedTicketStatus13;var _this$state2=this.state,open=_this$state2.open,selectedValue=_this$state2.selectedValue,openStatusDialog=_this$state2.openStatusDialog,selectedTicketStatus=_this$state2.selectedTicketStatus,status=_this$state2.status,cargoStates=_this$state2.cargoStates,distributingState=_this$state2.distributingState,couriers=_this$state2.couriers,courier=_this$state2.courier,comment=_this$state2.comment;var classes=this.props.classes;var tickets=this.state.tickets.filter(function(ticket){return ticket.users.username.toLowerCase().indexOf(_this4.state.searchValue.toLowerCase())!==-1||ticket.address.toLowerCase().indexOf(_this4.state.searchValue.toLowerCase())!==-1||ticket.firstName.toLowerCase().indexOf(_this4.state.searchValue.toLowerCase())!==-1||ticket.lastName.toLowerCase().indexOf(_this4.state.searchValue.toLowerCase())!==-1||ticket.city.city.toLowerCase().indexOf(_this4.state.searchValue.toLowerCase())!==-1||ticket.state.toLowerCase().indexOf(_this4.state.searchValue.toLowerCase())!==-1||ticket.ticketProgress[ticket.ticketProgress.length-1].cargoState.state.toLowerCase().indexOf(_this4.state.searchValue.toLowerCase())!==-1;});var searchValue=this.state.searchValue;return/*#__PURE__*/React.createElement(\"div\",{style:{height:\"100%\"}},/*#__PURE__*/React.createElement(\"h3\",null,\"Ticket Listings\"),/*#__PURE__*/React.createElement(\"div\",null,\" \",/*#__PURE__*/React.createElement(TextField,{style:{width:\"100%\"},id:\"standard-basic\",label:\"Search\",variant:\"outlined\",name:\"searchValue\",value:searchValue,onChange:this._handleTextFieldChange})),/*#__PURE__*/React.createElement(Dialog,{onClose:this.handleClose,\"aria-labelledby\":\"simple-dialog-title\",open:open,maxWidth:\"lg\",fullWidth:true},/*#__PURE__*/React.createElement(DialogTitle,{id:\"simple-dialog-title\"},\"Ticket progress\"),/*#__PURE__*/React.createElement(Divider,null),/*#__PURE__*/React.createElement(DialogContent,{style:{padding:\"30px\"}},/*#__PURE__*/React.createElement(TableContainer,{component:Paper,style:{marginTop:\"20px\"}},/*#__PURE__*/React.createElement(Table,{className:classes.table,\"aria-label\":\"simple table\"},/*#__PURE__*/React.createElement(TableHead,null,/*#__PURE__*/React.createElement(TableRow,null,/*#__PURE__*/React.createElement(TableCell,{align:\"left\"},\"Status\"),/*#__PURE__*/React.createElement(TableCell,{align:\"left\"},\"Date\"),/*#__PURE__*/React.createElement(TableCell,{align:\"left\"},\"Name\"),/*#__PURE__*/React.createElement(TableCell,{align:\"left\"},\"Assigned to\"),/*#__PURE__*/React.createElement(TableCell,{align:\"left\"},\"Comment\"))),/*#__PURE__*/React.createElement(TableBody,null,((_selectedValue$ticket=selectedValue.ticketProgress)===null||_selectedValue$ticket===void 0?void 0:_selectedValue$ticket.length)?selectedValue===null||selectedValue===void 0?void 0:(_selectedValue$ticket2=selectedValue.ticketProgress)===null||_selectedValue$ticket2===void 0?void 0:_selectedValue$ticket2.map(function(progress){var _progress$assigned;return/*#__PURE__*/React.createElement(TableRow,{key:progress.id},/*#__PURE__*/React.createElement(TableCell,{align:\"left\"},/*#__PURE__*/React.createElement(Chip,{label:progress.cargoState.description,variant:\"default\",style:{backgroundColor:progress.cargoState.state===\"CREATED\"?\"#c0bdc1e3\":progress.cargoState.state===\"STORED\"?\"#ff7100\":progress.cargoState.state===\"DISTRIBUTING\"?\"#4959bf\":progress.cargoState.state===\"DELIVERED\"?\"#00bf40\":\"\"}})),/*#__PURE__*/React.createElement(TableCell,{align:\"left\"},\" \",new Date(progress.date).toLocaleDateString(\"en-US\"),\" \",new Date(progress.date).toLocaleTimeString(\"en-US\"),\" \"),/*#__PURE__*/React.createElement(TableCell,{align:\"left\"},progress.users.firstName,\" \",progress.users.lastName),/*#__PURE__*/React.createElement(TableCell,{align:\"left\"},progress===null||progress===void 0?void 0:(_progress$assigned=progress.assigned)===null||_progress$assigned===void 0?void 0:_progress$assigned.firstName),/*#__PURE__*/React.createElement(TableCell,{align:\"left\"},progress.comment));}):\"No data\"))))),/*#__PURE__*/React.createElement(TableContainer,{component:Paper,style:{marginTop:\"20px\"}},/*#__PURE__*/React.createElement(Table,{className:classes.table,\"aria-label\":\"simple table\"},/*#__PURE__*/React.createElement(TableHead,null,/*#__PURE__*/React.createElement(TableRow,null,/*#__PURE__*/React.createElement(TableCell,null,\"Date\"),/*#__PURE__*/React.createElement(TableCell,null,\"NO\"),/*#__PURE__*/React.createElement(TableCell,null,\"State\"),/*#__PURE__*/React.createElement(TableCell,{align:\"right\"},\"First name\"),/*#__PURE__*/React.createElement(TableCell,{align:\"right\"},\"Last name\"),/*#__PURE__*/React.createElement(TableCell,{align:\"right\"},\"Mobile\"),/*#__PURE__*/React.createElement(TableCell,{align:\"right\"},\"Comment\"),/*#__PURE__*/React.createElement(TableCell,{align:\"right\"},\"Address\"),/*#__PURE__*/React.createElement(TableCell,{align:\"right\"},\"City\"),/*#__PURE__*/React.createElement(TableCell,{align:\"right\"},\"State\"),/*#__PURE__*/React.createElement(TableCell,{align:\"right\"},\"Price\"),/*#__PURE__*/React.createElement(TableCell,{align:\"right\"},\"Curreny\"),/*#__PURE__*/React.createElement(TableCell,{align:\"right\"}))),/*#__PURE__*/React.createElement(TableBody,null,(tickets===null||tickets===void 0?void 0:tickets.length)?tickets.map(function(ticket){return/*#__PURE__*/React.createElement(TableRow,{key:ticket.id,onClick:function onClick(){return _this4.handleClickOpen(ticket);},style:{cursor:\"pointer\"}},/*#__PURE__*/React.createElement(TableCell,{component:\"th\",scope:\"row\"},new Date(ticket.date).toLocaleDateString(\"en-US\"),\" \",new Date(ticket.date).toLocaleTimeString(\"en-US\")),/*#__PURE__*/React.createElement(TableCell,{align:\"right\"},ticket.no),/*#__PURE__*/React.createElement(TableCell,{align:\"right\",onClick:function onClick(e){_this4.changeStatus(e,ticket);}},\" \",/*#__PURE__*/React.createElement(Chip,{label:ticket.ticketProgress[ticket.ticketProgress.length-1].cargoState.description,variant:\"default\",style:{backgroundColor:ticket.ticketProgress[ticket.ticketProgress.length-1].cargoState.state===\"CREATED\"?\"#c0bdc1e3\":ticket.ticketProgress[ticket.ticketProgress.length-1].cargoState.state===\"STORED\"?\"#ff7100\":ticket.ticketProgress[ticket.ticketProgress.length-1].cargoState.state===\"DISTRIBUTING\"?\"#4959bf\":ticket.ticketProgress[ticket.ticketProgress.length-1].cargoState.state===\"DELIVERED\"?\"#00bf40\":ticket.ticketProgress[ticket.ticketProgress.length-1].cargoState.state===\"REJECTED\"?\"#ff2424\":\"\"}})),/*#__PURE__*/React.createElement(TableCell,{align:\"right\"},ticket.firstName),/*#__PURE__*/React.createElement(TableCell,{align:\"right\"},ticket.lastName),/*#__PURE__*/React.createElement(TableCell,{align:\"right\"},ticket.mobile),/*#__PURE__*/React.createElement(TableCell,{align:\"right\"},ticket.comment),/*#__PURE__*/React.createElement(TableCell,{align:\"right\"},ticket.address),/*#__PURE__*/React.createElement(TableCell,{align:\"right\"},ticket.city.city),/*#__PURE__*/React.createElement(TableCell,{align:\"right\"},ticket.state),/*#__PURE__*/React.createElement(TableCell,{align:\"right\"},ticket.price),/*#__PURE__*/React.createElement(TableCell,{align:\"right\"},ticket.currency.currency),/*#__PURE__*/React.createElement(TableCell,{align:\"right\"},/*#__PURE__*/React.createElement(PrintIcon,{style:{color:\"#4c4a4adb\"},onClick:function onClick(e){_this4.goToPrintedForm(e,ticket);}})));}):\"No data\"))),/*#__PURE__*/React.createElement(Dialog,{onClose:this.handleClose,\"aria-labelledby\":\"simple-dialog-title\",open:openStatusDialog,maxWidth:\"sm\",fullWidth:true},/*#__PURE__*/React.createElement(DialogTitle,{id:\"simple-dialog-title\"},\"Change ticket status\"),/*#__PURE__*/React.createElement(Divider,null),/*#__PURE__*/React.createElement(DialogContent,{style:{padding:\"30px\",textAlign:\"center\"}},/*#__PURE__*/React.createElement(Chip,{label:selectedTicketStatus===null||selectedTicketStatus===void 0?void 0:(_selectedTicketStatus=selectedTicketStatus.ticketProgress)===null||_selectedTicketStatus===void 0?void 0:(_selectedTicketStatus2=_selectedTicketStatus[(selectedTicketStatus===null||selectedTicketStatus===void 0?void 0:(_selectedTicketStatus3=selectedTicketStatus.ticketProgress)===null||_selectedTicketStatus3===void 0?void 0:_selectedTicketStatus3.length)-1].cargoState)===null||_selectedTicketStatus2===void 0?void 0:_selectedTicketStatus2.description,variant:\"default\",style:{backgroundColor:(selectedTicketStatus===null||selectedTicketStatus===void 0?void 0:(_selectedTicketStatus4=selectedTicketStatus.ticketProgress)===null||_selectedTicketStatus4===void 0?void 0:_selectedTicketStatus4[(selectedTicketStatus===null||selectedTicketStatus===void 0?void 0:(_selectedTicketStatus5=selectedTicketStatus.ticketProgress)===null||_selectedTicketStatus5===void 0?void 0:_selectedTicketStatus5.length)-1].cargoState.state)===\"CREATED\"?\"#c0bdc1e3\":(selectedTicketStatus===null||selectedTicketStatus===void 0?void 0:(_selectedTicketStatus6=selectedTicketStatus.ticketProgress)===null||_selectedTicketStatus6===void 0?void 0:_selectedTicketStatus6[(selectedTicketStatus===null||selectedTicketStatus===void 0?void 0:(_selectedTicketStatus7=selectedTicketStatus.ticketProgress)===null||_selectedTicketStatus7===void 0?void 0:_selectedTicketStatus7.length)-1].cargoState.state)===\"STORED\"?\"#ff7100\":(selectedTicketStatus===null||selectedTicketStatus===void 0?void 0:(_selectedTicketStatus8=selectedTicketStatus.ticketProgress)===null||_selectedTicketStatus8===void 0?void 0:_selectedTicketStatus8[(selectedTicketStatus===null||selectedTicketStatus===void 0?void 0:(_selectedTicketStatus9=selectedTicketStatus.ticketProgress)===null||_selectedTicketStatus9===void 0?void 0:_selectedTicketStatus9.length)-1].cargoState.state)===\"DISTRIBUTING\"?\"#4959bf\":(selectedTicketStatus===null||selectedTicketStatus===void 0?void 0:(_selectedTicketStatus10=selectedTicketStatus.ticketProgress)===null||_selectedTicketStatus10===void 0?void 0:_selectedTicketStatus10[(selectedTicketStatus===null||selectedTicketStatus===void 0?void 0:(_selectedTicketStatus11=selectedTicketStatus.ticketProgress)===null||_selectedTicketStatus11===void 0?void 0:_selectedTicketStatus11.length)-1].cargoState.state)===\"DELIVERED\"?\"#00bf40\":(selectedTicketStatus===null||selectedTicketStatus===void 0?void 0:(_selectedTicketStatus12=selectedTicketStatus.ticketProgress)===null||_selectedTicketStatus12===void 0?void 0:_selectedTicketStatus12[(selectedTicketStatus===null||selectedTicketStatus===void 0?void 0:(_selectedTicketStatus13=selectedTicketStatus.ticketProgress)===null||_selectedTicketStatus13===void 0?void 0:_selectedTicketStatus13.length)-1].cargoState.state)===\"REJECTED\"?\"#ff2424\":\"\"}}),/*#__PURE__*/React.createElement(Select,{labelId:\"demo-simple-select-label\",id:\"demo-simple-select\",value:status,onChange:this.handleChange,style:{width:\"100%\",marginTop:\"40px\"}},cargoStates.map(function(state){return/*#__PURE__*/React.createElement(MenuItem,{key:state.id,value:state},state.description);})),distributingState?/*#__PURE__*/React.createElement(Select,{labelId:\"demo-simple-select-label\",id:\"demo-simple-select\",value:courier,onChange:this.handleCourierChange,style:{width:\"100%\",marginTop:\"40px\"}},couriers.map(function(courier){return/*#__PURE__*/React.createElement(MenuItem,{key:courier.id,value:courier},courier.username);})):\"\",/*#__PURE__*/React.createElement(TextField,{style:{padding:\"10px\",width:\"95%\"},id:\"standard-secondary\",label:\"Comment\",name:\"comment\",value:comment,onChange:this._handleTextFieldChange,color:\"secondary\",required:true}),/*#__PURE__*/React.createElement(Button,{variant:\"contained\",color:\"secondary\",onClick:this.changeCargoStatus},\"Submit\"))));}}]);return Tickets;}(Component);Tickets.contextTypes={router:PropTypes.func};export default withRouter(withStyles(styles)(Tickets));","map":{"version":3,"sources":["/home/xhesina/Desktop/courier-server/src/main/react-app/src/TicketListings/tickets.js"],"names":["React","Component","axios","Table","TableBody","TableCell","TableContainer","TableHead","TableRow","Paper","DialogTitle","Dialog","DialogContent","Chip","Select","Divider","TextField","MenuItem","Button","PrintIcon","PropTypes","withStyles","withRouter","styles","theme","table","minWidth","Tickets","props","goToPrintedForm","e","ticket","stopPropagation","history","push","pathname","id","state","window","location","reload","_handleTextFieldChange","setState","target","name","value","changeStatus","openStatusDialog","selectedTicketStatus","comment","distributingState","get","then","response","console","log","cargoStates","data","catch","error","handleClickOpen","open","selectedValue","handleClose","handleChange","event","status","couriers","handleCourierChange","courier","tickets","searchValue","bind","changeCargoStatus","body","cargoStateId","ticketId","assignedId","post","classes","filter","users","username","toLowerCase","indexOf","address","firstName","lastName","city","ticketProgress","length","cargoState","height","width","padding","marginTop","map","progress","description","backgroundColor","Date","date","toLocaleDateString","toLocaleTimeString","assigned","cursor","no","mobile","price","currency","color","textAlign","contextTypes","router","func"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport axios from \"axios\";\nimport Table from \"@material-ui/core/Table\";\nimport TableBody from \"@material-ui/core/TableBody\";\nimport TableCell from \"@material-ui/core/TableCell\";\nimport TableContainer from \"@material-ui/core/TableContainer\";\nimport TableHead from \"@material-ui/core/TableHead\";\nimport TableRow from \"@material-ui/core/TableRow\";\nimport Paper from \"@material-ui/core/Paper\";\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\nimport Dialog from \"@material-ui/core/Dialog\";\nimport DialogContent from \"@material-ui/core/DialogContent\";\nimport Chip from \"@material-ui/core/Chip\";\nimport Select from \"@material-ui/core/Select\";\nimport Divider from \"@material-ui/core/Divider\";\nimport TextField from \"@material-ui/core/TextField\";\nimport MenuItem from \"@material-ui/core/MenuItem\";\nimport Button from \"@material-ui/core/Button\";\nimport PrintIcon from '@material-ui/icons/Print';\nimport PropTypes from 'prop-types';\nimport { withStyles } from \"@material-ui/styles\";\nimport { withRouter } from 'react-router-dom';\n\n\nconst styles = (theme) => ({\n  table: {\n    minWidth: 650,\n  },\n});\n\nclass Tickets extends Component {\n  static contextTypes = {\n    router: PropTypes.func\n}\n  constructor(props) {\n    super(props);\n    this.state = {\n      tickets: [],\n      open: false,\n      openStatusDialog: false,\n      selectedValue: {},\n      selectedTicketStatus: {},\n      searchValue: \"\",\n      cargoStates: [],\n      status: {},\n      distributingState: false,\n      couriers: [],\n      courier: \"\",\n      comment:\"\",\n    };\n    this.handleClickOpen = this.handleClickOpen.bind(this);\n    this._handleTextFieldChange = this._handleTextFieldChange.bind(this);\n    this.changeCargoStatus = this.changeCargoStatus.bind(this);\n    \n     \n  }\n \n  goToPrintedForm = (e,ticket) => {\n    e.stopPropagation();\n    this.props.history.push({\n      pathname: `/print?ticket=${ticket.id}`,\n      state: {ticket: ticket.id}\n    }); \n    window.location.reload();\n  }\n  _handleTextFieldChange = (e) => {\n    this.setState({\n      [e.target.name]: e.target.value,\n    });\n  };\n  changeStatus = (e, ticket) => {\n    e.stopPropagation();\n    this.setState({ openStatusDialog: true });\n    this.setState({ selectedTicketStatus: ticket });\n    this.setState({ comment: \"\" });\n    this.setState({ distributingState: false });\n    \n    axios\n      .get(\"/cargoState\")\n      .then((response) => {\n        console.log(response);\n        this.setState({ cargoStates: response.data });\n      })\n      .catch((error) => {\n        console.log(error);\n      });\n  };\n  componentDidMount() {\n    axios\n      .get(\"/ticket\")\n      .then((response) => {\n        this.setState({ tickets: response.data });\n      })\n      .catch((error) => {\n        console.log(error);\n      });\n  }\n  handleClickOpen = (ticket) => {\n    this.setState({ open: true });\n    this.setState({ selectedValue: ticket });\n  };\n\n  handleClose = (value) => {\n    this.setState({ open: false });\n    this.setState({ openStatusDialog: false });\n  };\n  handleChange = (event) => {\n    this.setState({ status: event.target.value });\n    if (event.target.value.state === \"DISTRIBUTING\") {\n      this.setState({ distributingState: true });\n      axios\n        .get(\"/user/authority\")\n        .then((response) => {\n          console.log(response);\n          this.setState({ couriers: response.data });\n        })\n        .catch((error) => {\n          console.log(error);\n        });\n    } else  this.setState({ distributingState: false });\n  };\n  handleCourierChange = (event) => {\n    this.setState({ courier: event.target.value });\n  };\n  changeCargoStatus(event){\n    const {\n      comment,courier,selectedTicketStatus,status\n    } = this.state;\n    let body = {\n      cargoStateId:status.id,\n      comment:comment,\n      ticketId:selectedTicketStatus.id,\n      assignedId:courier.id\n    }\n    axios\n    .post(\"/ticketProgress\", body, { \"Content-Type\": \"application/json\" })\n    .then((response) => {\n      console.log(response);\n      this.setState({ openStatusDialog: false });\n      axios\n      .get(\"/ticket\")\n      .then((response) => {\n        this.setState({ tickets: response.data });\n      })\n      .catch((error) => {\n        console.log(error);\n      });\n    })\n    .catch((error) => {\n      console.log(\"login error\", error);\n    });   \n  }\n  render() {\n    const {\n      open,\n      selectedValue,\n      openStatusDialog,\n      selectedTicketStatus,\n      status,\n      cargoStates,\n      distributingState,\n      couriers,\n      courier,\n      comment\n    } = this.state;\n    const { classes } = this.props;\n    let tickets = this.state.tickets.filter((ticket) => {\n      return (\n        ticket.users.username\n          .toLowerCase()\n          .indexOf(this.state.searchValue.toLowerCase()) !== -1 ||\n        ticket.address\n          .toLowerCase()\n          .indexOf(this.state.searchValue.toLowerCase()) !== -1 ||\n        ticket.firstName\n          .toLowerCase()\n          .indexOf(this.state.searchValue.toLowerCase()) !== -1 ||\n        ticket.lastName\n          .toLowerCase()\n          .indexOf(this.state.searchValue.toLowerCase()) !== -1 ||\n        ticket.city.city\n          .toLowerCase()\n          .indexOf(this.state.searchValue.toLowerCase()) !== -1 ||\n        ticket.state\n          .toLowerCase()\n          .indexOf(this.state.searchValue.toLowerCase()) !== -1 ||\n        ticket.ticketProgress[ticket.ticketProgress.length - 1].cargoState.state\n          .toLowerCase()\n          .indexOf(this.state.searchValue.toLowerCase()) !== -1\n      );\n    });\n    let searchValue = this.state.searchValue;\n    return (\n      <div style={{ height: \"100%\" }}>\n        <h3>Ticket Listings</h3>\n        <div>\n          {\" \"}\n          <TextField\n            style={{ width: \"100%\" }}\n            id=\"standard-basic\"\n            label=\"Search\"\n            variant=\"outlined\"\n            name=\"searchValue\"\n            value={searchValue}\n            onChange={this._handleTextFieldChange}\n          />\n        </div>\n        <Dialog\n          onClose={this.handleClose}\n          aria-labelledby=\"simple-dialog-title\"\n          open={open}\n          maxWidth={\"lg\"}\n          fullWidth={true}\n        >\n          <DialogTitle id=\"simple-dialog-title\">Ticket progress</DialogTitle>\n          <Divider />\n          <DialogContent style={{ padding: \"30px\" }}>\n            <TableContainer component={Paper} style={{ marginTop: \"20px\" }}>\n              <Table className={classes.table} aria-label=\"simple table\">\n                <TableHead>\n                  <TableRow>\n                    <TableCell align=\"left\">Status</TableCell>\n                    <TableCell align=\"left\">Date</TableCell>\n                    <TableCell align=\"left\">Name</TableCell>\n                    <TableCell align=\"left\">Assigned to</TableCell>\n                    <TableCell align=\"left\">Comment</TableCell>\n                  </TableRow>\n                </TableHead>\n                <TableBody>\n                  {selectedValue.ticketProgress?.length\n                    ? selectedValue?.ticketProgress?.map((progress) => (\n                        <TableRow key={progress.id}>\n                          <TableCell align=\"left\">\n                            <Chip\n                              label={progress.cargoState.description}\n                              variant=\"default\"\n                              style={{\n                                backgroundColor:\n                                  progress.cargoState.state === \"CREATED\"\n                                    ? \"#c0bdc1e3\"\n                                    : progress.cargoState.state === \"STORED\"\n                                    ? \"#ff7100\"\n                                    : progress.cargoState.state ===\n                                      \"DISTRIBUTING\"\n                                    ? \"#4959bf\"\n                                    : progress.cargoState.state === \"DELIVERED\"\n                                    ? \"#00bf40\"\n                                    : \"\",\n                              }}\n                            />\n                          </TableCell>\n                          <TableCell align=\"left\">\n                            {\" \"}\n                            {new Date(progress.date).toLocaleDateString(\n                              \"en-US\"\n                            )}{\" \"}\n                            {new Date(progress.date).toLocaleTimeString(\n                              \"en-US\"\n                            )}{\" \"}\n                          </TableCell>\n                          <TableCell align=\"left\">\n                            {progress.users.firstName} {progress.users.lastName}\n                          </TableCell>\n                          <TableCell align=\"left\">\n                            {progress?.assigned?.firstName}\n                          </TableCell>\n                          <TableCell align=\"left\">{progress.comment}</TableCell>\n                        </TableRow>\n                      ))\n                    : \"No data\"}\n                </TableBody>\n              </Table>\n            </TableContainer>\n          </DialogContent>\n        </Dialog>\n        <TableContainer component={Paper} style={{ marginTop: \"20px\" }}>\n          <Table className={classes.table} aria-label=\"simple table\">\n            <TableHead>\n              <TableRow>\n                <TableCell>Date</TableCell>\n                <TableCell>NO</TableCell>\n                <TableCell>State</TableCell>\n                <TableCell align=\"right\">First name</TableCell>\n                <TableCell align=\"right\">Last name</TableCell>\n                <TableCell align=\"right\">Mobile</TableCell>\n                <TableCell align=\"right\">Comment</TableCell>\n                <TableCell align=\"right\">Address</TableCell>\n                <TableCell align=\"right\">City</TableCell>\n                <TableCell align=\"right\">State</TableCell>\n                <TableCell align=\"right\">Price</TableCell>\n                <TableCell align=\"right\">Curreny</TableCell>\n                <TableCell align=\"right\"></TableCell>\n              </TableRow>\n            </TableHead>\n            <TableBody>\n              {tickets?.length\n                ? tickets.map((ticket) => (\n                    <TableRow\n                      key={ticket.id}\n                      onClick={() => this.handleClickOpen(ticket)}\n                      style={{ cursor: \"pointer\" }}\n                    >\n                      <TableCell component=\"th\" scope=\"row\">\n                        {new Date(ticket.date).toLocaleDateString(\"en-US\")}{\" \"}\n                        {new Date(ticket.date).toLocaleTimeString(\"en-US\")}\n                      </TableCell>\n                      <TableCell align=\"right\">{ticket.no}</TableCell>\n                      <TableCell\n                        align=\"right\"\n                        onClick={(e) => {\n                          this.changeStatus(e, ticket);\n                        }}\n                      >\n                        {\" \"}\n                        <Chip\n                          label={\n                            ticket.ticketProgress[\n                              ticket.ticketProgress.length - 1\n                            ].cargoState.description\n                          }\n                          variant=\"default\"\n                          style={{\n                            backgroundColor:\n                              ticket.ticketProgress[\n                                ticket.ticketProgress.length - 1\n                              ].cargoState.state === \"CREATED\"\n                                ? \"#c0bdc1e3\"\n                                : ticket.ticketProgress[\n                                    ticket.ticketProgress.length - 1\n                                  ].cargoState.state === \"STORED\"\n                                ? \"#ff7100\"\n                                : ticket.ticketProgress[\n                                    ticket.ticketProgress.length - 1\n                                  ].cargoState.state === \"DISTRIBUTING\"\n                                ? \"#4959bf\"\n                                : ticket.ticketProgress[\n                                    ticket.ticketProgress.length - 1\n                                  ].cargoState.state === \"DELIVERED\"\n                                ? \"#00bf40\"\n                                : ticket.ticketProgress[\n                                    ticket.ticketProgress.length - 1\n                                  ].cargoState.state === \"REJECTED\"\n                                ? \"#ff2424\"\n                                : \"\",\n                          }}\n                        />\n                      </TableCell>\n                      <TableCell align=\"right\">{ticket.firstName}</TableCell>\n                      <TableCell align=\"right\">{ticket.lastName}</TableCell>\n                      <TableCell align=\"right\">{ticket.mobile}</TableCell>\n                      <TableCell align=\"right\">{ticket.comment}</TableCell>\n                      <TableCell align=\"right\">{ticket.address}</TableCell>\n                      <TableCell align=\"right\">{ticket.city.city}</TableCell>\n                      <TableCell align=\"right\">{ticket.state}</TableCell>\n                      <TableCell align=\"right\">{ticket.price}</TableCell>\n                      <TableCell align=\"right\">\n                        {ticket.currency.currency}\n                      </TableCell>\n                      <TableCell align=\"right\"><PrintIcon style={{color:\"#4c4a4adb\"}}   onClick={(e) => {\n                          this.goToPrintedForm(e, ticket);\n                        }} /></TableCell>\n                    </TableRow>\n                  ))\n                : \"No data\"}\n            </TableBody>\n          </Table>\n        </TableContainer>\n\n        <Dialog\n          onClose={this.handleClose}\n          aria-labelledby=\"simple-dialog-title\"\n          open={openStatusDialog}\n          maxWidth={\"sm\"}\n          fullWidth={true}\n        >\n          <DialogTitle id=\"simple-dialog-title\">\n            Change ticket status\n          </DialogTitle>\n          <Divider />\n          <DialogContent style={{ padding: \"30px\", textAlign: \"center\" }}>\n            <Chip\n              label={\n                selectedTicketStatus?.ticketProgress?.[\n                  selectedTicketStatus?.ticketProgress?.length - 1\n                ].cargoState?.description\n              }\n              variant=\"default\"\n              style={{\n                backgroundColor:\n                  selectedTicketStatus?.ticketProgress?.[\n                    selectedTicketStatus?.ticketProgress?.length - 1\n                  ].cargoState.state === \"CREATED\"\n                    ? \"#c0bdc1e3\"\n                    : selectedTicketStatus?.ticketProgress?.[\n                        selectedTicketStatus?.ticketProgress?.length - 1\n                      ].cargoState.state === \"STORED\"\n                    ? \"#ff7100\"\n                    : selectedTicketStatus?.ticketProgress?.[\n                        selectedTicketStatus?.ticketProgress?.length - 1\n                      ].cargoState.state === \"DISTRIBUTING\"\n                    ? \"#4959bf\"\n                    : selectedTicketStatus?.ticketProgress?.[\n                        selectedTicketStatus?.ticketProgress?.length - 1\n                      ].cargoState.state === \"DELIVERED\"\n                    ? \"#00bf40\"\n                    : selectedTicketStatus?.ticketProgress?.[\n                        selectedTicketStatus?.ticketProgress?.length - 1\n                      ].cargoState.state === \"REJECTED\"\n                    ? \"#ff2424\"\n                    : \"\",\n              }}\n            />\n            <Select\n              labelId=\"demo-simple-select-label\"\n              id=\"demo-simple-select\"\n              value={status}\n              onChange={this.handleChange}\n              style={{ width: \"100%\", marginTop: \"40px\" }}\n            >\n              {cargoStates.map((state) => (\n                <MenuItem key={state.id} value={state}>\n                  {state.description}\n                </MenuItem>\n              ))}\n            </Select>\n          \n            {distributingState ? (\n              <Select\n                labelId=\"demo-simple-select-label\"\n                id=\"demo-simple-select\"\n                value={courier}\n                onChange={this.handleCourierChange}\n                style={{ width: \"100%\", marginTop: \"40px\" }}\n              >\n                {couriers.map((courier) => (\n                  <MenuItem key={courier.id} value={courier}>\n                    {courier.username}\n                  </MenuItem>\n                ))}\n              </Select>\n            ) : (\n              \"\"\n            )}\n              <TextField\n                style={{ padding: \"10px\", width: \"95%\" }}\n                id=\"standard-secondary\"\n                label=\"Comment\"\n                name=\"comment\"\n                value={comment}\n                onChange={this._handleTextFieldChange}\n                color=\"secondary\"\n                required\n              />\n               <Button variant=\"contained\" color=\"secondary\" onClick={this.changeCargoStatus}>\n                Submit\n              </Button>\n          </DialogContent>\n        </Dialog>\n      </div>\n    );\n  }\n}\n\nexport default withRouter(withStyles(styles)(Tickets));\n"]},"metadata":{},"sourceType":"module"}