{"ast":null,"code":"var _jsxFileName = \"/home/xhesina/Desktop/courier-server/src/main/react-app/src/auth/Login.js\";\nimport React, { Component } from \"react\";\nimport axios from \"axios\";\nimport TextField from \"@material-ui/core/TextField\";\nimport Grid from \"@material-ui/core/Grid\";\nimport Button from \"@material-ui/core/Button\";\nimport Card from \"@material-ui/core/Card\";\nimport CardContent from \"@material-ui/core/CardContent\";\nimport Divider from \"@material-ui/core/Divider\";\nimport { withStyles } from \"@material-ui/styles\";\nimport Snackbar from \"@material-ui/core/Snackbar\";\n\nconst styles = theme => ({\n  root: {\n    maxWidth: 500,\n    width: '90%',\n    margin: \"100px auto\"\n  },\n  bullet: {\n    display: \"inline-block\",\n    margin: \"0 2px\",\n    transform: \"scale(0.8)\"\n  },\n  title: {\n    fontSize: 14\n  },\n  pos: {\n    marginBottom: 12\n  }\n});\n\nclass Login extends Component {\n  constructor(props) {\n    super(props);\n\n    this.redirectToRegister = () => {\n      this.props.history.push(\"/register\");\n    };\n\n    this.handleClose = () => {\n      this.setState({\n        open: false\n      });\n    };\n\n    this.state = {\n      username: \"\",\n      password: \"\",\n      open: false,\n      vertical: \"top\",\n      horizontal: \"center\",\n      message: \"\"\n    };\n    this.handleSubmit = this.handleSubmit.bind(this);\n    this.handleChange = this.handleChange.bind(this);\n  }\n\n  handleChange(event) {\n    this.setState({\n      [event.target.name]: event.target.value\n    });\n  }\n\n  handleSubmit(event) {\n    const {\n      username,\n      password\n    } = this.state;\n    let body = {\n      username: username,\n      password: password\n    };\n    axios.post(\"/login\", body, {\n      \"Content-Type\": \"application/json\"\n    }).then(response => {\n      let accessToken = response.headers.authorization;\n      let username = JSON.parse(response.config.data).username;\n      localStorage.setItem(\"token\", accessToken);\n      localStorage.setItem(\"user\", username);\n      console.log(response);\n      this.setState({\n        open: true,\n        vertical: \"top\",\n        horizontal: \"right\",\n        message: \"Loged in successfully\"\n      });\n      this.props.history.push(\"/\");\n    }).catch(error => {\n      console.log(\"login error\", error);\n      this.setState({\n        open: true,\n        vertical: \"top\",\n        horizontal: \"right\",\n        message: \"Username or password is incorrect!\"\n      });\n    });\n    event.preventDefault();\n  }\n\n  render() {\n    const {\n      username,\n      password,\n      open,\n      vertical,\n      horizontal,\n      message\n    } = this.state;\n    const {\n      classes\n    } = this.props;\n    return /*#__PURE__*/React.createElement(Card, {\n      className: classes.root,\n      variant: \"outlined\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(CardContent, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        display: \"inline\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      style: {\n        fontSize: \"22px\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 13\n      }\n    }, \"Log in\"), /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        color: \"#bb91fd\",\n        cursor: \"pointer\"\n      },\n      onClick: this.redirectToRegister,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 13\n      }\n    }, \"Register\"), /*#__PURE__*/React.createElement(Divider, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(\"form\", {\n      onSubmit: this.handleSubmit,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Grid, {\n      container: true,\n      spacing: 3,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(Grid, {\n      item: true,\n      xs: 12,\n      style: {\n        marginTop: '30px'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(TextField, {\n      style: {\n        padding: \"10px\",\n        width: \"90%\"\n      },\n      id: \"standard-secondary\",\n      name: \"username\",\n      value: username,\n      onChange: this.handleChange,\n      color: \"secondary\",\n      label: \"username\",\n      required: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 19\n      }\n    })), /*#__PURE__*/React.createElement(Grid, {\n      item: true,\n      xs: 12,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(TextField, {\n      style: {\n        padding: \"10px\",\n        width: \"90%\"\n      },\n      id: \"standard-secondary\",\n      type: \"password\",\n      name: \"password\",\n      value: password,\n      onChange: this.handleChange,\n      color: \"secondary\",\n      label: \"Password\",\n      required: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 19\n      }\n    }))), /*#__PURE__*/React.createElement(Grid, {\n      item: true,\n      xs: 12,\n      style: {\n        paddingTop: \"30px\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      variant: \"contained\",\n      color: \"secondary\",\n      type: \"submit\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 17\n      }\n    }, \"Login\"))), /*#__PURE__*/React.createElement(Snackbar, {\n      anchorOrigin: {\n        vertical,\n        horizontal\n      },\n      open: open,\n      onClose: this.handleClose,\n      message: message,\n      key: vertical + horizontal,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 13\n      }\n    }))));\n  }\n\n}\n\nexport default withStyles(styles)(Login);","map":{"version":3,"sources":["/home/xhesina/Desktop/courier-server/src/main/react-app/src/auth/Login.js"],"names":["React","Component","axios","TextField","Grid","Button","Card","CardContent","Divider","withStyles","Snackbar","styles","theme","root","maxWidth","width","margin","bullet","display","transform","title","fontSize","pos","marginBottom","Login","constructor","props","redirectToRegister","history","push","handleClose","setState","open","state","username","password","vertical","horizontal","message","handleSubmit","bind","handleChange","event","target","name","value","body","post","then","response","accessToken","headers","authorization","JSON","parse","config","data","localStorage","setItem","console","log","catch","error","preventDefault","render","classes","color","cursor","marginTop","padding","paddingTop"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport axios from \"axios\";\nimport TextField from \"@material-ui/core/TextField\";\nimport Grid from \"@material-ui/core/Grid\";\nimport Button from \"@material-ui/core/Button\";\nimport Card from \"@material-ui/core/Card\";\nimport CardContent from \"@material-ui/core/CardContent\";\nimport Divider from \"@material-ui/core/Divider\";\nimport { withStyles } from \"@material-ui/styles\";\nimport Snackbar from \"@material-ui/core/Snackbar\";\n\nconst styles = (theme) => ({\n  root: {\n    maxWidth: 500,\n    width: '90%',\n    margin: \"100px auto\",\n  },\n  bullet: {\n    display: \"inline-block\",\n    margin: \"0 2px\",\n    transform: \"scale(0.8)\",\n  },\n  title: {\n    fontSize: 14,\n  },\n  pos: {\n    marginBottom: 12,\n  },\n});\n\nclass Login extends Component {\n  redirectToRegister = () => {\n    this.props.history.push(\"/register\");\n  };\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      username: \"\",\n      password: \"\",\n      open: false,\n      vertical: \"top\",\n      horizontal: \"center\",\n      message:\"\"\n    };\n\n    this.handleSubmit = this.handleSubmit.bind(this);\n    this.handleChange = this.handleChange.bind(this);\n  }\n\n  handleChange(event) {\n    this.setState({\n      [event.target.name]: event.target.value,\n    });\n  }\n\n  handleSubmit(event) {\n    const { username, password } = this.state;\n    let body = {\n      username: username,\n      password: password,\n    };\n    axios\n      .post(\"/login\", body, { \"Content-Type\": \"application/json\" })\n      .then((response) => {\n        let accessToken = response.headers.authorization;\n        let username = JSON.parse(response.config.data).username\n        localStorage.setItem(\"token\", accessToken);\n        localStorage.setItem(\"user\", username);\n        console.log(response)\n        this.setState({ open: true, vertical: \"top\", horizontal: \"right\",message:\"Loged in successfully\" });\n        this.props.history.push(\"/\");\n      })\n      .catch((error) => {\n        console.log(\"login error\", error);\n        this.setState({ open: true, vertical: \"top\", horizontal: \"right\",message:\"Username or password is incorrect!\" });\n      });\n    event.preventDefault();\n  }\n  handleClose = () => {\n    this.setState({ open: false });\n  };\n\n  render() {\n    const { username, password, open, vertical, horizontal,message } = this.state;\n    const { classes } = this.props;\n    return (\n      <Card className={classes.root} variant=\"outlined\">\n        <CardContent>\n          <div style={{ display: \"inline\" }}>\n            <p style={{ fontSize: \"22px\" }}>Log in</p>\n            <div\n              style={{ color: \"#bb91fd\", cursor: \"pointer\" }}\n              onClick={this.redirectToRegister}\n            >\n              Register\n            </div>\n            <Divider />\n            <form onSubmit={this.handleSubmit}>\n              <Grid container spacing={3}>\n                <Grid item xs={12} style={{marginTop: '30px'}}>\n                  <TextField\n                    style={{ padding: \"10px\", width: \"90%\" }}\n                    id=\"standard-secondary\"\n                    name=\"username\"\n                    value={username}\n                    onChange={this.handleChange}\n                    color=\"secondary\"\n                    label=\"username\"\n                    required\n                  />\n                </Grid>\n                <Grid item xs={12}>\n                  <TextField\n                    style={{ padding: \"10px\", width: \"90%\" }}\n                    id=\"standard-secondary\"\n                    type=\"password\"\n                    name=\"password\"\n                    value={password}\n                    onChange={this.handleChange}\n                    color=\"secondary\"\n                    label=\"Password\"\n                    required\n                  />\n                </Grid>\n              </Grid>\n              <Grid item xs={12} style={{ paddingTop: \"30px\" }}>\n                <Button variant=\"contained\" color=\"secondary\" type=\"submit\">\n                  Login\n                </Button>\n              </Grid>\n            </form>\n            <Snackbar\n              anchorOrigin={{ vertical, horizontal }}\n              open={open}\n              onClose={this.handleClose}\n              message={message}\n              key={vertical + horizontal}\n            />\n          </div>\n        </CardContent>\n      </Card>\n    );\n  }\n}\nexport default withStyles(styles)(Login);\n"]},"metadata":{},"sourceType":"module"}