{"ast":null,"code":"import _defineProperty from\"/home/xhesina/Desktop/courier-server/src/main/react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _classCallCheck from\"/home/xhesina/Desktop/courier-server/src/main/react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/xhesina/Desktop/courier-server/src/main/react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/home/xhesina/Desktop/courier-server/src/main/react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/home/xhesina/Desktop/courier-server/src/main/react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/xhesina/Desktop/courier-server/src/main/react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import axios from\"axios\";import Table from\"@material-ui/core/Table\";import TableBody from\"@material-ui/core/TableBody\";import TableCell from\"@material-ui/core/TableCell\";import TableContainer from\"@material-ui/core/TableContainer\";import TableHead from\"@material-ui/core/TableHead\";import TableRow from\"@material-ui/core/TableRow\";import Paper from\"@material-ui/core/Paper\";import DialogTitle from\"@material-ui/core/DialogTitle\";import Dialog from\"@material-ui/core/Dialog\";import DialogContent from\"@material-ui/core/DialogContent\";import Chip from\"@material-ui/core/Chip\";import Select from\"@material-ui/core/Select\";import Divider from\"@material-ui/core/Divider\";import TextField from\"@material-ui/core/TextField\";import MenuItem from\"@material-ui/core/MenuItem\";import Button from\"@material-ui/core/Button\";import PrintIcon from\"@material-ui/icons/Print\";import PropTypes from\"prop-types\";import{withStyles}from\"@material-ui/styles\";import{withRouter}from\"react-router-dom\";import Snackbar from\"@material-ui/core/Snackbar\";var styles=function styles(theme){return{table:{minWidth:1000}};};var Tickets=/*#__PURE__*/function(_Component){_inherits(Tickets,_Component);var _super=_createSuper(Tickets);function Tickets(props){var _this;_classCallCheck(this,Tickets);_this=_super.call(this,props);_this.goToPrintedForm=function(e,ticket){e.stopPropagation();_this.props.history.push({pathname:\"/print?ticket=\".concat(ticket.id),state:{ticket:ticket.id}});window.location.reload();};_this._handleTextFieldChange=function(e){_this.setState(_defineProperty({},e.target.name,e.target.value));};_this.changeStatus=function(e,ticket){_this.setState({selectedTicketStatus:ticket});e.stopPropagation();if(ticket.ticketProgress[ticket.ticketProgress.length-1].cargoState.state==\"REJECTED\"&&ticket.rejected==false){if(ticket.users.username===localStorage.getItem(\"user\")){_this.setState({rejectedModal:true});_this.setState({openSnackBar:false});}}else if(ticket.ticketProgress[ticket.ticketProgress.length-1].cargoState.state==\"REJECTED\"&&ticket.rejected==true){console.log(\"TESt\");_this.setState({openSnackBar:true,vertical:\"bottom\",horizontal:\"center\",message:\"Refuzimi eshte konfirmuar nga clienti\"+ticket.firstName+ticket.lastName});}else{_this.setState({rejectedModal:false});if(!_this.checkIfUserisOnlyClient()){_this.setState({openStatusDialog:true});_this.setState({selectedTicketStatus:ticket});_this.setState({comment:\"\"});_this.setState({distributingState:false});}else{_this.setState({client:true});}if(ticket.ticketProgress[ticket.ticketProgress.length-1].cargoState.state==\"LIQUIDATED\"){_this.setState({liquidated:true});}else _this.setState({liquidated:false});axios.get(\"/cargoState\").then(function(response){console.log(response);_this.setState({cargoStates:response.data});}).catch(function(error){console.log(error);});}};_this.handleClickOpen=function(ticket){_this.setState({open:true});_this.setState({selectedValue:ticket});};_this.handleClose=function(value){_this.setState({open:false});_this.setState({openStatusDialog:false});_this.setState({rejectedModal:false});};_this.handleChange=function(event){_this.setState({status:event.target.value});if(event.target.value.state===\"DISTRIBUTING\"){_this.setState({distributingState:true});axios.get(\"/user/authority\").then(function(response){console.log(response);_this.setState({couriers:response.data});}).catch(function(error){console.log(error);});}else _this.setState({distributingState:false});};_this.handleCourierChange=function(event){_this.setState({courier:event.target.value});};_this.state={tickets:[],open:false,openStatusDialog:false,selectedValue:{},selectedTicketStatus:{},searchValue:\"\",cargoStates:[],status:{},distributingState:false,couriers:[],courier:\"\",comment:\"\",rejectedModal:false,client:false,liquidated:false,admin:false,vertical:\"bottom\",horizontal:\"center\",openSnackBar:false,message:\"\"};_this.handleClickOpen=_this.handleClickOpen.bind(_assertThisInitialized(_this));_this._handleTextFieldChange=_this._handleTextFieldChange.bind(_assertThisInitialized(_this));_this.changeCargoStatus=_this.changeCargoStatus.bind(_assertThisInitialized(_this));_this.confirmRejection=_this.confirmRejection.bind(_assertThisInitialized(_this));return _this;}_createClass(Tickets,[{key:\"checkIfUserisOnlyClient\",value:function checkIfUserisOnlyClient(){var user=JSON.parse(localStorage.getItem(\"userData\"));if(user!=null){if(user.authorities.length==1&&user.authorities[0].roleName==\"CLIENT\"){this.setState({openSnackBar:true,vertical:\"bottom\",horizontal:\"center\",message:\"Skeni akses\"});return true;}else{this.setState({openSnackBar:false});return false;}}else return false;}},{key:\"confirmRejection\",value:function confirmRejection(){var _this2=this;console.log(this.state.selectedTicketStatus);var formData=new FormData();formData.append(\"rejected\",true);formData.append(\"ticketId\",this.state.selectedTicketStatus.id);axios.post(\"/ticket/confirmRejectedTicket\",formData,{headers:{\"Content-Type\":\"multipart/form-data\"}}).then(function(response){console.log(response);_this2.handleClose();axios.get(\"/ticket\").then(function(responseTi){_this2.setState({tickets:responseTi.data});}).catch(function(error){console.log(error);});}).catch(function(error){console.log(\"login error\",error);});}},{key:\"componentDidMount\",value:function componentDidMount(){var _this3=this;axios.get(\"/ticket\").then(function(response){console.log(response.data);_this3.setState({tickets:response.data});}).catch(function(error){console.log(error);});}},{key:\"changeCargoStatus\",value:function changeCargoStatus(event){var _this4=this;var _this$state=this.state,comment=_this$state.comment,courier=_this$state.courier,selectedTicketStatus=_this$state.selectedTicketStatus,status=_this$state.status;var body={cargoStateId:status.id,comment:comment,ticketId:selectedTicketStatus.id,assignedId:courier.id};axios.post(\"/ticketProgress\",body,{\"Content-Type\":\"application/json\"}).then(function(response){console.log(response);_this4.setState({openStatusDialog:false});axios.get(\"/ticket\").then(function(response){_this4.setState({tickets:response.data});}).catch(function(error){console.log(error);});}).catch(function(error){console.log(\"login error\",error);});}},{key:\"render\",value:function render(){var _this5=this,_selectedValue$ticket,_selectedValue$ticket2,_selectedTicketStatus,_selectedTicketStatus2,_selectedTicketStatus3,_selectedTicketStatus4,_selectedTicketStatus5,_selectedTicketStatus6,_selectedTicketStatus7,_selectedTicketStatus8,_selectedTicketStatus9,_selectedTicketStatus10,_selectedTicketStatus11,_selectedTicketStatus12,_selectedTicketStatus13;var _this$state2=this.state,open=_this$state2.open,selectedValue=_this$state2.selectedValue,openStatusDialog=_this$state2.openStatusDialog,selectedTicketStatus=_this$state2.selectedTicketStatus,status=_this$state2.status,cargoStates=_this$state2.cargoStates,distributingState=_this$state2.distributingState,couriers=_this$state2.couriers,courier=_this$state2.courier,comment=_this$state2.comment,rejectedModal=_this$state2.rejectedModal,client=_this$state2.client,liquidated=_this$state2.liquidated,admin=_this$state2.admin,vertical=_this$state2.vertical,horizontal=_this$state2.horizontal,openSnackBar=_this$state2.openSnackBar,message=_this$state2.message;var classes=this.props.classes;var tickets=this.state.tickets.filter(function(ticket){return ticket.users.username.toLowerCase().indexOf(_this5.state.searchValue.toLowerCase())!==-1||ticket.address.toLowerCase().indexOf(_this5.state.searchValue.toLowerCase())!==-1||ticket.firstName.toLowerCase().indexOf(_this5.state.searchValue.toLowerCase())!==-1||ticket.lastName.toLowerCase().indexOf(_this5.state.searchValue.toLowerCase())!==-1||ticket.city.city.toLowerCase().indexOf(_this5.state.searchValue.toLowerCase())!==-1||ticket.state.toLowerCase().indexOf(_this5.state.searchValue.toLowerCase())!==-1||ticket.ticketProgress[ticket.ticketProgress.length-1].cargoState.state.toLowerCase().indexOf(_this5.state.searchValue.toLowerCase())!==-1;});var searchValue=this.state.searchValue;return/*#__PURE__*/React.createElement(\"div\",{style:{height:\"100%\"}},/*#__PURE__*/React.createElement(\"h3\",null,\"Ticket Listings\"),/*#__PURE__*/React.createElement(\"div\",null,\" \",/*#__PURE__*/React.createElement(TextField,{style:{width:\"100%\"},id:\"standard-basic\",label:\"Search\",variant:\"outlined\",name:\"searchValue\",value:searchValue,onChange:this._handleTextFieldChange})),/*#__PURE__*/React.createElement(Dialog,{onClose:this.handleClose,\"aria-labelledby\":\"simple-dialog-title\",open:open,maxWidth:\"lg\",fullWidth:true},/*#__PURE__*/React.createElement(DialogTitle,{id:\"simple-dialog-title\"},\"Ticket progress\"),/*#__PURE__*/React.createElement(Divider,null),/*#__PURE__*/React.createElement(DialogContent,{style:{padding:\"30px\"}},/*#__PURE__*/React.createElement(TableContainer,{component:Paper,style:{marginTop:\"20px\"}},/*#__PURE__*/React.createElement(Table,{className:classes.table,\"aria-label\":\"simple table\"},/*#__PURE__*/React.createElement(TableHead,null,/*#__PURE__*/React.createElement(TableRow,null,/*#__PURE__*/React.createElement(TableCell,{align:\"left\"},\"Status\"),/*#__PURE__*/React.createElement(TableCell,{align:\"left\"},\"Date\"),/*#__PURE__*/React.createElement(TableCell,{align:\"left\"},\"Name\"),/*#__PURE__*/React.createElement(TableCell,{align:\"left\"},\"Assigned to\"),/*#__PURE__*/React.createElement(TableCell,{align:\"left\"},\"Comment\"))),/*#__PURE__*/React.createElement(TableBody,null,((_selectedValue$ticket=selectedValue.ticketProgress)===null||_selectedValue$ticket===void 0?void 0:_selectedValue$ticket.length)?selectedValue===null||selectedValue===void 0?void 0:(_selectedValue$ticket2=selectedValue.ticketProgress)===null||_selectedValue$ticket2===void 0?void 0:_selectedValue$ticket2.map(function(progress){var _progress$assigned;return/*#__PURE__*/React.createElement(TableRow,{key:progress.id},/*#__PURE__*/React.createElement(TableCell,{align:\"left\"},/*#__PURE__*/React.createElement(Chip,{label:progress.cargoState.description,variant:\"default\",style:{backgroundColor:progress.cargoState.state===\"CREATED\"?\"#c0bdc1e3\":progress.cargoState.state===\"STORED\"?\"#ff7100\":progress.cargoState.state===\"DISTRIBUTING\"?\"#4959bf\":progress.cargoState.state===\"DELIVERED\"?\"#00bf40\":\"\"}})),/*#__PURE__*/React.createElement(TableCell,{align:\"left\"},\" \",new Date(progress.date).toLocaleDateString(\"en-US\"),\" \",new Date(progress.date).toLocaleTimeString(\"en-US\"),\" \"),/*#__PURE__*/React.createElement(TableCell,{align:\"left\"},progress.users.firstName,\" \",progress.users.lastName),/*#__PURE__*/React.createElement(TableCell,{align:\"left\"},progress===null||progress===void 0?void 0:(_progress$assigned=progress.assigned)===null||_progress$assigned===void 0?void 0:_progress$assigned.firstName),/*#__PURE__*/React.createElement(TableCell,{align:\"left\"},progress.comment));}):\"No data\"))))),/*#__PURE__*/React.createElement(TableContainer,{component:Paper,style:{marginTop:\"20px\"}},/*#__PURE__*/React.createElement(Table,{className:classes.table,\"aria-label\":\"simple table\"},/*#__PURE__*/React.createElement(TableHead,null,/*#__PURE__*/React.createElement(TableRow,null,/*#__PURE__*/React.createElement(TableCell,null,\"Date\"),/*#__PURE__*/React.createElement(TableCell,null,\"NO\"),/*#__PURE__*/React.createElement(TableCell,null,\"State\"),/*#__PURE__*/React.createElement(TableCell,{align:\"right\"},\"First name\"),/*#__PURE__*/React.createElement(TableCell,{align:\"right\"},\"Last name\"),/*#__PURE__*/React.createElement(TableCell,{align:\"right\"},\"Mobile\"),/*#__PURE__*/React.createElement(TableCell,{align:\"right\"},\"Comment\"),/*#__PURE__*/React.createElement(TableCell,{align:\"right\"},\"Address\"),/*#__PURE__*/React.createElement(TableCell,{align:\"right\"},\"City\"),/*#__PURE__*/React.createElement(TableCell,{align:\"right\"},\"State\"),/*#__PURE__*/React.createElement(TableCell,{align:\"right\"},\"Price\"),/*#__PURE__*/React.createElement(TableCell,{align:\"right\"},\"Curreny\"),/*#__PURE__*/React.createElement(TableCell,{align:\"right\"}))),/*#__PURE__*/React.createElement(TableBody,null,(tickets===null||tickets===void 0?void 0:tickets.length)?tickets.map(function(ticket){return/*#__PURE__*/React.createElement(TableRow,{key:ticket.id,onClick:function onClick(){return _this5.handleClickOpen(ticket);},style:{cursor:\"pointer\"}},/*#__PURE__*/React.createElement(TableCell,{component:\"th\",scope:\"row\"},new Date(ticket.date).toLocaleDateString(\"en-US\"),\" \",new Date(ticket.date).toLocaleTimeString(\"en-US\")),/*#__PURE__*/React.createElement(TableCell,{align:\"right\"},ticket.no),/*#__PURE__*/React.createElement(TableCell,{align:\"right\",onClick:function onClick(e){_this5.changeStatus(e,ticket);}},\" \",/*#__PURE__*/React.createElement(Chip,{label:ticket.ticketProgress[ticket.ticketProgress.length-1].cargoState.description,variant:\"default\",style:{backgroundColor:ticket.ticketProgress[ticket.ticketProgress.length-1].cargoState.state===\"CREATED\"?\"#c0bdc1e3\":ticket.ticketProgress[ticket.ticketProgress.length-1].cargoState.state===\"STORED\"?\"#ff7100\":ticket.ticketProgress[ticket.ticketProgress.length-1].cargoState.state===\"DISTRIBUTING\"?\"#4959bf\":ticket.ticketProgress[ticket.ticketProgress.length-1].cargoState.state===\"DELIVERED\"?\"#00bf40\":ticket.ticketProgress[ticket.ticketProgress.length-1].cargoState.state===\"REJECTED\"?\"#ff2424\":\"\"}})),/*#__PURE__*/React.createElement(TableCell,{align:\"right\"},ticket.firstName),/*#__PURE__*/React.createElement(TableCell,{align:\"right\"},ticket.lastName),/*#__PURE__*/React.createElement(TableCell,{align:\"right\"},ticket.mobile),/*#__PURE__*/React.createElement(TableCell,{align:\"right\"},ticket.comment),/*#__PURE__*/React.createElement(TableCell,{align:\"right\"},ticket.address),/*#__PURE__*/React.createElement(TableCell,{align:\"right\"},ticket.city.city),/*#__PURE__*/React.createElement(TableCell,{align:\"right\"},ticket.state),/*#__PURE__*/React.createElement(TableCell,{align:\"right\"},ticket.price),/*#__PURE__*/React.createElement(TableCell,{align:\"right\"},ticket.currency.currency),/*#__PURE__*/React.createElement(TableCell,{align:\"right\"},/*#__PURE__*/React.createElement(PrintIcon,{style:{color:\"#4c4a4adb\"},onClick:function onClick(e){_this5.goToPrintedForm(e,ticket);}})));}):\"No data\"))),liquidated==false?/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Dialog,{onClose:this.handleClose,\"aria-labelledby\":\"simple-dialog-title\",open:rejectedModal,maxWidth:\"sm\",fullWidth:true},/*#__PURE__*/React.createElement(DialogTitle,{id:\"simple-dialog-title\"},/*#__PURE__*/React.createElement(\"p\",null,\"Confirm rejection\")),/*#__PURE__*/React.createElement(Divider,null),/*#__PURE__*/React.createElement(DialogContent,{style:{padding:\"20px\",textAlign:\"center\"}},/*#__PURE__*/React.createElement(\"h4\",null,\"Konfirmo refuzimin e ticket\"),/*#__PURE__*/React.createElement(\"div\",{style:{display:\"inline-flex\"}},/*#__PURE__*/React.createElement(Button,{variant:\"contained\",color:\"primary\",onClick:this.confirmRejection},\"Konfirmo\"),/*#__PURE__*/React.createElement(Button,{style:{marginLeft:\"10px\"},variant:\"contained\",color:\"secondary\",onClick:this.handleClose},\"Anullo\")))),/*#__PURE__*/React.createElement(Dialog,{onClose:this.handleClose,\"aria-labelledby\":\"simple-dialog-title\",open:openStatusDialog,maxWidth:\"sm\",fullWidth:true},/*#__PURE__*/React.createElement(DialogTitle,{id:\"simple-dialog-title\"},/*#__PURE__*/React.createElement(\"p\",null,\"Change ticket Status\")),/*#__PURE__*/React.createElement(Divider,null),/*#__PURE__*/React.createElement(DialogContent,{style:{padding:\"30px\",textAlign:\"center\"}},/*#__PURE__*/React.createElement(Chip,{label:selectedTicketStatus===null||selectedTicketStatus===void 0?void 0:(_selectedTicketStatus=selectedTicketStatus.ticketProgress)===null||_selectedTicketStatus===void 0?void 0:(_selectedTicketStatus2=_selectedTicketStatus[(selectedTicketStatus===null||selectedTicketStatus===void 0?void 0:(_selectedTicketStatus3=selectedTicketStatus.ticketProgress)===null||_selectedTicketStatus3===void 0?void 0:_selectedTicketStatus3.length)-1].cargoState)===null||_selectedTicketStatus2===void 0?void 0:_selectedTicketStatus2.description,variant:\"default\",style:{backgroundColor:(selectedTicketStatus===null||selectedTicketStatus===void 0?void 0:(_selectedTicketStatus4=selectedTicketStatus.ticketProgress)===null||_selectedTicketStatus4===void 0?void 0:_selectedTicketStatus4[(selectedTicketStatus===null||selectedTicketStatus===void 0?void 0:(_selectedTicketStatus5=selectedTicketStatus.ticketProgress)===null||_selectedTicketStatus5===void 0?void 0:_selectedTicketStatus5.length)-1].cargoState.state)===\"CREATED\"?\"#c0bdc1e3\":(selectedTicketStatus===null||selectedTicketStatus===void 0?void 0:(_selectedTicketStatus6=selectedTicketStatus.ticketProgress)===null||_selectedTicketStatus6===void 0?void 0:_selectedTicketStatus6[(selectedTicketStatus===null||selectedTicketStatus===void 0?void 0:(_selectedTicketStatus7=selectedTicketStatus.ticketProgress)===null||_selectedTicketStatus7===void 0?void 0:_selectedTicketStatus7.length)-1].cargoState.state)===\"STORED\"?\"#ff7100\":(selectedTicketStatus===null||selectedTicketStatus===void 0?void 0:(_selectedTicketStatus8=selectedTicketStatus.ticketProgress)===null||_selectedTicketStatus8===void 0?void 0:_selectedTicketStatus8[(selectedTicketStatus===null||selectedTicketStatus===void 0?void 0:(_selectedTicketStatus9=selectedTicketStatus.ticketProgress)===null||_selectedTicketStatus9===void 0?void 0:_selectedTicketStatus9.length)-1].cargoState.state)===\"DISTRIBUTING\"?\"#4959bf\":(selectedTicketStatus===null||selectedTicketStatus===void 0?void 0:(_selectedTicketStatus10=selectedTicketStatus.ticketProgress)===null||_selectedTicketStatus10===void 0?void 0:_selectedTicketStatus10[(selectedTicketStatus===null||selectedTicketStatus===void 0?void 0:(_selectedTicketStatus11=selectedTicketStatus.ticketProgress)===null||_selectedTicketStatus11===void 0?void 0:_selectedTicketStatus11.length)-1].cargoState.state)===\"DELIVERED\"?\"#00bf40\":(selectedTicketStatus===null||selectedTicketStatus===void 0?void 0:(_selectedTicketStatus12=selectedTicketStatus.ticketProgress)===null||_selectedTicketStatus12===void 0?void 0:_selectedTicketStatus12[(selectedTicketStatus===null||selectedTicketStatus===void 0?void 0:(_selectedTicketStatus13=selectedTicketStatus.ticketProgress)===null||_selectedTicketStatus13===void 0?void 0:_selectedTicketStatus13.length)-1].cargoState.state)===\"REJECTED\"?\"#ff2424\":\"\"}}),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Select,{labelId:\"demo-simple-select-label\",id:\"demo-simple-select\",value:status,onChange:this.handleChange,style:{width:\"100%\",marginTop:\"40px\"}},cargoStates.map(function(state){return/*#__PURE__*/React.createElement(MenuItem,{key:state.id,value:state},state.description);})),distributingState?/*#__PURE__*/React.createElement(Select,{labelId:\"demo-simple-select-label\",id:\"demo-simple-select\",value:courier,onChange:this.handleCourierChange,style:{width:\"100%\",marginTop:\"40px\"}},couriers.map(function(courier){return/*#__PURE__*/React.createElement(MenuItem,{key:courier.id,value:courier},courier.username);})):\"\",/*#__PURE__*/React.createElement(TextField,{style:{padding:\"10px\",width:\"95%\"},id:\"standard-secondary\",label:\"Comment\",name:\"comment\",value:comment,onChange:this._handleTextFieldChange,color:\"secondary\",required:true}),/*#__PURE__*/React.createElement(Button,{variant:\"contained\",color:\"secondary\",onClick:this.changeCargoStatus},\"Submit\")))),/*#__PURE__*/React.createElement(Snackbar,{anchorOrigin:{vertical:vertical,horizontal:horizontal},open:openSnackBar,message:message,key:vertical+horizontal})):/*#__PURE__*/React.createElement(Snackbar,{anchorOrigin:{vertical:vertical,horizontal:horizontal},open:\"true\",message:\"Status i likuiduar\",key:vertical+horizontal}));}}]);return Tickets;}(Component);Tickets.contextTypes={router:PropTypes.func};export default withRouter(withStyles(styles)(Tickets));","map":{"version":3,"sources":["/home/xhesina/Desktop/courier-server/src/main/react-app/src/TicketListings/tickets.js"],"names":["React","Component","axios","Table","TableBody","TableCell","TableContainer","TableHead","TableRow","Paper","DialogTitle","Dialog","DialogContent","Chip","Select","Divider","TextField","MenuItem","Button","PrintIcon","PropTypes","withStyles","withRouter","Snackbar","styles","theme","table","minWidth","Tickets","props","goToPrintedForm","e","ticket","stopPropagation","history","push","pathname","id","state","window","location","reload","_handleTextFieldChange","setState","target","name","value","changeStatus","selectedTicketStatus","ticketProgress","length","cargoState","rejected","users","username","localStorage","getItem","rejectedModal","openSnackBar","console","log","vertical","horizontal","message","firstName","lastName","checkIfUserisOnlyClient","openStatusDialog","comment","distributingState","client","liquidated","get","then","response","cargoStates","data","catch","error","handleClickOpen","open","selectedValue","handleClose","handleChange","event","status","couriers","handleCourierChange","courier","tickets","searchValue","admin","bind","changeCargoStatus","confirmRejection","user","JSON","parse","authorities","roleName","formData","FormData","append","post","headers","responseTi","body","cargoStateId","ticketId","assignedId","classes","filter","toLowerCase","indexOf","address","city","height","width","padding","marginTop","map","progress","description","backgroundColor","Date","date","toLocaleDateString","toLocaleTimeString","assigned","cursor","no","mobile","price","currency","color","textAlign","display","marginLeft","contextTypes","router","func"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport axios from \"axios\";\nimport Table from \"@material-ui/core/Table\";\nimport TableBody from \"@material-ui/core/TableBody\";\nimport TableCell from \"@material-ui/core/TableCell\";\nimport TableContainer from \"@material-ui/core/TableContainer\";\nimport TableHead from \"@material-ui/core/TableHead\";\nimport TableRow from \"@material-ui/core/TableRow\";\nimport Paper from \"@material-ui/core/Paper\";\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\nimport Dialog from \"@material-ui/core/Dialog\";\nimport DialogContent from \"@material-ui/core/DialogContent\";\nimport Chip from \"@material-ui/core/Chip\";\nimport Select from \"@material-ui/core/Select\";\nimport Divider from \"@material-ui/core/Divider\";\nimport TextField from \"@material-ui/core/TextField\";\nimport MenuItem from \"@material-ui/core/MenuItem\";\nimport Button from \"@material-ui/core/Button\";\nimport PrintIcon from \"@material-ui/icons/Print\";\nimport PropTypes from \"prop-types\";\nimport { withStyles } from \"@material-ui/styles\";\nimport { withRouter } from \"react-router-dom\";\nimport Snackbar from \"@material-ui/core/Snackbar\";\n\nconst styles = (theme) => ({\n  table: {\n    minWidth: 1000,\n  },\n});\n\nclass Tickets extends Component {\n  static contextTypes = {\n    router: PropTypes.func,\n  };\n  constructor(props) {\n    super(props);\n    this.state = {\n      tickets: [],\n      open: false,\n      openStatusDialog: false,\n      selectedValue: {},\n      selectedTicketStatus: {},\n      searchValue: \"\",\n      cargoStates: [],\n      status: {},\n      distributingState: false,\n      couriers: [],\n      courier: \"\",\n      comment: \"\",\n      rejectedModal: false,\n      client: false,\n      liquidated: false,\n      admin: false,\n      vertical: \"bottom\",\n      horizontal: \"center\",\n      openSnackBar: false,\n      message: \"\",\n    };\n    this.handleClickOpen = this.handleClickOpen.bind(this);\n    this._handleTextFieldChange = this._handleTextFieldChange.bind(this);\n    this.changeCargoStatus = this.changeCargoStatus.bind(this);\n    this.confirmRejection = this.confirmRejection.bind(this);\n  }\n\n  goToPrintedForm = (e, ticket) => {\n    e.stopPropagation();\n    this.props.history.push({\n      pathname: `/print?ticket=${ticket.id}`,\n      state: { ticket: ticket.id },\n    });\n    window.location.reload();\n  };\n  _handleTextFieldChange = (e) => {\n    this.setState({\n      [e.target.name]: e.target.value,\n    });\n  };\n\n  checkIfUserisOnlyClient() {\n    let user = JSON.parse(localStorage.getItem(\"userData\"));\n    if (user != null) {\n      if (\n        user.authorities.length == 1 &&\n        user.authorities[0].roleName == \"CLIENT\"\n      ) {\n        this.setState({\n          openSnackBar: true,\n          vertical: \"bottom\",\n          horizontal: \"center\",\n          message: \"Skeni akses\",\n        });\n        return true;\n      } else {\n        this.setState({ openSnackBar: false });\n        return false;\n      }\n    } else return false;\n  }\n\n  changeStatus = (e, ticket) => {\n    this.setState({ selectedTicketStatus: ticket });\n    e.stopPropagation();\n    if (\n      ticket.ticketProgress[ticket.ticketProgress.length - 1].cargoState\n        .state == \"REJECTED\" && ticket.rejected == false\n    ) {\n      if (ticket.users.username === localStorage.getItem(\"user\")) {\n        this.setState({ rejectedModal: true });\n        this.setState({ openSnackBar: false });\n      }\n    \n    } \n    else if ( ticket.ticketProgress[ticket.ticketProgress.length - 1].cargoState\n      .state == \"REJECTED\" && ticket.rejected == true){\n        console.log(\"TESt\")\n        this.setState({\n          openSnackBar: true,\n          vertical: \"bottom\",\n          horizontal: \"center\",\n          message: \"Refuzimi eshte konfirmuar nga clienti\" + ticket.firstName + ticket.lastName,\n        }); \n      }else {\n      this.setState({ rejectedModal: false });\n\n      if (!this.checkIfUserisOnlyClient()) {\n        this.setState({ openStatusDialog: true });\n        this.setState({ selectedTicketStatus: ticket });\n        this.setState({ comment: \"\" });\n        this.setState({ distributingState: false });\n      } else {\n        this.setState({ client: true });\n      }\n      if (\n        ticket.ticketProgress[ticket.ticketProgress.length - 1].cargoState\n          .state == \"LIQUIDATED\"\n      ) {\n        this.setState({ liquidated: true });\n      } else this.setState({ liquidated: false });\n\n      axios\n        .get(\"/cargoState\")\n        .then((response) => {\n          console.log(response);\n          this.setState({ cargoStates: response.data });\n        })\n        .catch((error) => {\n          console.log(error);\n        });\n    }\n  };\n  confirmRejection(){\n    console.log(this.state.selectedTicketStatus)\n    var formData = new FormData();\n    formData.append(\"rejected\", true);\n    formData.append(\"ticketId\", this.state.selectedTicketStatus.id);\n    \n    axios\n    .post(\"/ticket/confirmRejectedTicket\",  formData,{\n      headers: {\n        \"Content-Type\": \"multipart/form-data\",\n      },\n    })\n    .then((response) => {\n      console.log(response)\n      this.handleClose();\n      axios\n      .get(\"/ticket\")\n      .then((responseTi) => {\n        this.setState({ tickets: responseTi.data });\n      })\n      .catch((error) => {\n        console.log(error);\n      });\n  \n    })\n    .catch((error) => {\n      console.log(\"login error\", error);\n    });\n  }\n  componentDidMount() {\n    axios\n      .get(\"/ticket\")\n      .then((response) => {\n        console.log(response.data)\n        this.setState({ tickets: response.data });\n      })\n      .catch((error) => {\n        console.log(error);\n      });\n  }\n  handleClickOpen = (ticket) => {\n    this.setState({ open: true });\n    this.setState({ selectedValue: ticket });\n  };\n\n  handleClose = (value) => {\n    this.setState({ open: false });\n    this.setState({ openStatusDialog: false });\n    this.setState({ rejectedModal: false });\n  };\n  handleChange = (event) => {\n    this.setState({ status: event.target.value });\n    if (event.target.value.state === \"DISTRIBUTING\") {\n      this.setState({ distributingState: true });\n      axios\n        .get(\"/user/authority\")\n        .then((response) => {\n          console.log(response);\n          this.setState({ couriers: response.data });\n        })\n        .catch((error) => {\n          console.log(error);\n        });\n    } else this.setState({ distributingState: false });\n  };\n  handleCourierChange = (event) => {\n    this.setState({ courier: event.target.value });\n  };\n  changeCargoStatus(event) {\n    const { comment, courier, selectedTicketStatus, status } = this.state;\n    let body = {\n      cargoStateId: status.id,\n      comment: comment,\n      ticketId: selectedTicketStatus.id,\n      assignedId: courier.id,\n    };\n    axios\n      .post(\"/ticketProgress\", body, { \"Content-Type\": \"application/json\" })\n      .then((response) => {\n        console.log(response);\n        this.setState({ openStatusDialog: false });\n        axios\n          .get(\"/ticket\")\n          .then((response) => {\n            this.setState({ tickets: response.data });\n          })\n          .catch((error) => {\n            console.log(error);\n          });\n      })\n      .catch((error) => {\n        console.log(\"login error\", error);\n      });\n  }\n  render() {\n    const {\n      open,\n      selectedValue,\n      openStatusDialog,\n      selectedTicketStatus,\n      status,\n      cargoStates,\n      distributingState,\n      couriers,\n      courier,\n      comment,\n      rejectedModal,\n      client,\n      liquidated,\n      admin,\n      vertical,\n      horizontal,\n      openSnackBar,\n      message,\n    } = this.state;\n    const { classes } = this.props;\n    let tickets = this.state.tickets.filter((ticket) => {\n      return (\n        ticket.users.username\n          .toLowerCase()\n          .indexOf(this.state.searchValue.toLowerCase()) !== -1 ||\n        ticket.address\n          .toLowerCase()\n          .indexOf(this.state.searchValue.toLowerCase()) !== -1 ||\n        ticket.firstName\n          .toLowerCase()\n          .indexOf(this.state.searchValue.toLowerCase()) !== -1 ||\n        ticket.lastName\n          .toLowerCase()\n          .indexOf(this.state.searchValue.toLowerCase()) !== -1 ||\n        ticket.city.city\n          .toLowerCase()\n          .indexOf(this.state.searchValue.toLowerCase()) !== -1 ||\n        ticket.state\n          .toLowerCase()\n          .indexOf(this.state.searchValue.toLowerCase()) !== -1 ||\n        ticket.ticketProgress[ticket.ticketProgress.length - 1].cargoState.state\n          .toLowerCase()\n          .indexOf(this.state.searchValue.toLowerCase()) !== -1\n      );\n    });\n    let searchValue = this.state.searchValue;\n    return (\n      <div style={{ height: \"100%\" }}>\n        <h3>Ticket Listings</h3>\n        <div>\n          {\" \"}\n          <TextField\n            style={{ width: \"100%\" }}\n            id=\"standard-basic\"\n            label=\"Search\"\n            variant=\"outlined\"\n            name=\"searchValue\"\n            value={searchValue}\n            onChange={this._handleTextFieldChange}\n          />\n        </div>\n        <Dialog\n          onClose={this.handleClose}\n          aria-labelledby=\"simple-dialog-title\"\n          open={open}\n          maxWidth={\"lg\"}\n          fullWidth={true}\n        >\n          <DialogTitle id=\"simple-dialog-title\">Ticket progress</DialogTitle>\n          <Divider />\n          <DialogContent style={{ padding: \"30px\" }}>\n            <TableContainer component={Paper} style={{ marginTop: \"20px\" }}>\n              <Table className={classes.table} aria-label=\"simple table\">\n                <TableHead>\n                  <TableRow>\n                    <TableCell align=\"left\">Status</TableCell>\n                    <TableCell align=\"left\">Date</TableCell>\n                    <TableCell align=\"left\">Name</TableCell>\n                    <TableCell align=\"left\">Assigned to</TableCell>\n                    <TableCell align=\"left\">Comment</TableCell>\n                  </TableRow>\n                </TableHead>\n                <TableBody>\n                  {selectedValue.ticketProgress?.length\n                    ? selectedValue?.ticketProgress?.map((progress) => (\n                        <TableRow key={progress.id}>\n                          <TableCell align=\"left\">\n                            <Chip\n                              label={progress.cargoState.description}\n                              variant=\"default\"\n                              style={{\n                                backgroundColor:\n                                  progress.cargoState.state === \"CREATED\"\n                                    ? \"#c0bdc1e3\"\n                                    : progress.cargoState.state === \"STORED\"\n                                    ? \"#ff7100\"\n                                    : progress.cargoState.state ===\n                                      \"DISTRIBUTING\"\n                                    ? \"#4959bf\"\n                                    : progress.cargoState.state === \"DELIVERED\"\n                                    ? \"#00bf40\"\n                                    : \"\",\n                              }}\n                            />\n                          </TableCell>\n                          <TableCell align=\"left\">\n                            {\" \"}\n                            {new Date(progress.date).toLocaleDateString(\n                              \"en-US\"\n                            )}{\" \"}\n                            {new Date(progress.date).toLocaleTimeString(\n                              \"en-US\"\n                            )}{\" \"}\n                          </TableCell>\n                          <TableCell align=\"left\">\n                            {progress.users.firstName} {progress.users.lastName}\n                          </TableCell>\n                          <TableCell align=\"left\">\n                            {progress?.assigned?.firstName}\n                          </TableCell>\n                          <TableCell align=\"left\">{progress.comment}</TableCell>\n                        </TableRow>\n                      ))\n                    : \"No data\"}\n                </TableBody>\n              </Table>\n            </TableContainer>\n          </DialogContent>\n        </Dialog>\n        <TableContainer component={Paper} style={{ marginTop: \"20px\"}}>\n          <Table className={classes.table} aria-label=\"simple table\">\n            <TableHead>\n              <TableRow>\n                <TableCell>Date</TableCell>\n                <TableCell>NO</TableCell>\n                <TableCell>State</TableCell>\n                <TableCell align=\"right\">First name</TableCell>\n                <TableCell align=\"right\">Last name</TableCell>\n                <TableCell align=\"right\">Mobile</TableCell>\n                <TableCell align=\"right\">Comment</TableCell>\n                <TableCell align=\"right\">Address</TableCell>\n                <TableCell align=\"right\">City</TableCell>\n                <TableCell align=\"right\">State</TableCell>\n                <TableCell align=\"right\">Price</TableCell>\n                <TableCell align=\"right\">Curreny</TableCell>\n                <TableCell align=\"right\"></TableCell>\n              </TableRow>\n            </TableHead>\n            <TableBody>\n              {tickets?.length\n                ? tickets.map((ticket) => (\n                    <TableRow\n                      key={ticket.id}\n                      onClick={() => this.handleClickOpen(ticket)}\n                      style={{ cursor: \"pointer\" }}\n                    >\n                      <TableCell component=\"th\" scope=\"row\">\n                        {new Date(ticket.date).toLocaleDateString(\"en-US\")}{\" \"}\n                        {new Date(ticket.date).toLocaleTimeString(\"en-US\")}\n                      </TableCell>\n                      <TableCell align=\"right\">{ticket.no}</TableCell>\n                      <TableCell\n                        align=\"right\"\n                        onClick={(e) => {\n                          this.changeStatus(e, ticket);\n                        }}\n                      >\n                        {\" \"}\n                        <Chip\n                          label={\n                            ticket.ticketProgress[\n                              ticket.ticketProgress.length - 1\n                            ].cargoState.description\n                          }\n                          variant=\"default\"\n                          style={{\n                            backgroundColor:\n                              ticket.ticketProgress[\n                                ticket.ticketProgress.length - 1\n                              ].cargoState.state === \"CREATED\"\n                                ? \"#c0bdc1e3\"\n                                : ticket.ticketProgress[\n                                    ticket.ticketProgress.length - 1\n                                  ].cargoState.state === \"STORED\"\n                                ? \"#ff7100\"\n                                : ticket.ticketProgress[\n                                    ticket.ticketProgress.length - 1\n                                  ].cargoState.state === \"DISTRIBUTING\"\n                                ? \"#4959bf\"\n                                : ticket.ticketProgress[\n                                    ticket.ticketProgress.length - 1\n                                  ].cargoState.state === \"DELIVERED\"\n                                ? \"#00bf40\"\n                                : ticket.ticketProgress[\n                                    ticket.ticketProgress.length - 1\n                                  ].cargoState.state === \"REJECTED\"\n                                ? \"#ff2424\"\n                                : \"\",\n                          }}\n                        />\n                      </TableCell>\n                      <TableCell align=\"right\">{ticket.firstName}</TableCell>\n                      <TableCell align=\"right\">{ticket.lastName}</TableCell>\n                      <TableCell align=\"right\">{ticket.mobile}</TableCell>\n                      <TableCell align=\"right\">{ticket.comment}</TableCell>\n                      <TableCell align=\"right\">{ticket.address}</TableCell>\n                      <TableCell align=\"right\">{ticket.city.city}</TableCell>\n                      <TableCell align=\"right\">{ticket.state}</TableCell>\n                      <TableCell align=\"right\">{ticket.price}</TableCell>\n                      <TableCell align=\"right\">\n                        {ticket.currency.currency}\n                      </TableCell>\n                      <TableCell align=\"right\">\n                        <PrintIcon\n                          style={{ color: \"#4c4a4adb\" }}\n                          onClick={(e) => {\n                            this.goToPrintedForm(e, ticket);\n                          }}\n                        />\n                      </TableCell>\n                    </TableRow>\n                  ))\n                : \"No data\"}\n            </TableBody>\n          </Table>\n        </TableContainer>\n\n        {liquidated == false ? (\n          <div>\n            <Dialog\n              onClose={this.handleClose}\n              aria-labelledby=\"simple-dialog-title\"\n              open={rejectedModal}\n              maxWidth={\"sm\"}\n              fullWidth={true}\n            >\n              <DialogTitle id=\"simple-dialog-title\">\n                <p>Confirm rejection</p>\n              </DialogTitle>\n              <Divider />\n              <DialogContent style={{ padding: \"20px\", textAlign: \"center\" }}>\n                <h4>Konfirmo refuzimin e ticket</h4>\n                <div style={{ display: \"inline-flex\" }}>\n                  <Button variant=\"contained\" color=\"primary\" onClick={this.confirmRejection}>\n                    Konfirmo\n                  </Button>\n                  <Button style={{marginLeft:\"10px\"}}variant=\"contained\" color=\"secondary\" onClick={this.handleClose}>\n                    Anullo\n                  </Button>\n                </div>\n              </DialogContent>\n            </Dialog>\n            <Dialog\n              onClose={this.handleClose}\n              aria-labelledby=\"simple-dialog-title\"\n              open={openStatusDialog}\n              maxWidth={\"sm\"}\n              fullWidth={true}\n            >\n              <DialogTitle id=\"simple-dialog-title\">\n                <p>Change ticket Status</p>\n              </DialogTitle>\n              <Divider />\n              <DialogContent style={{ padding: \"30px\", textAlign: \"center\" }}>\n                <Chip\n                  label={\n                    selectedTicketStatus?.ticketProgress?.[\n                      selectedTicketStatus?.ticketProgress?.length - 1\n                    ].cargoState?.description\n                  }\n                  variant=\"default\"\n                  style={{\n                    backgroundColor:\n                      selectedTicketStatus?.ticketProgress?.[\n                        selectedTicketStatus?.ticketProgress?.length - 1\n                      ].cargoState.state === \"CREATED\"\n                        ? \"#c0bdc1e3\"\n                        : selectedTicketStatus?.ticketProgress?.[\n                            selectedTicketStatus?.ticketProgress?.length - 1\n                          ].cargoState.state === \"STORED\"\n                        ? \"#ff7100\"\n                        : selectedTicketStatus?.ticketProgress?.[\n                            selectedTicketStatus?.ticketProgress?.length - 1\n                          ].cargoState.state === \"DISTRIBUTING\"\n                        ? \"#4959bf\"\n                        : selectedTicketStatus?.ticketProgress?.[\n                            selectedTicketStatus?.ticketProgress?.length - 1\n                          ].cargoState.state === \"DELIVERED\"\n                        ? \"#00bf40\"\n                        : selectedTicketStatus?.ticketProgress?.[\n                            selectedTicketStatus?.ticketProgress?.length - 1\n                          ].cargoState.state === \"REJECTED\"\n                        ? \"#ff2424\"\n                        : \"\",\n                  }}\n                />\n                <div>\n                  <Select\n                    labelId=\"demo-simple-select-label\"\n                    id=\"demo-simple-select\"\n                    value={status}\n                    onChange={this.handleChange}\n                    style={{ width: \"100%\", marginTop: \"40px\" }}\n                  >\n                    {cargoStates.map((state) => (\n                      <MenuItem key={state.id} value={state}>\n                        {state.description}\n                      </MenuItem>\n                    ))}\n                  </Select>\n\n                  {distributingState ? (\n                    <Select\n                      labelId=\"demo-simple-select-label\"\n                      id=\"demo-simple-select\"\n                      value={courier}\n                      onChange={this.handleCourierChange}\n                      style={{ width: \"100%\", marginTop: \"40px\" }}\n                    >\n                      {couriers.map((courier) => (\n                        <MenuItem key={courier.id} value={courier}>\n                          {courier.username}\n                        </MenuItem>\n                      ))}\n                    </Select>\n                  ) : (\n                    \"\"\n                  )}\n                  <TextField\n                    style={{ padding: \"10px\", width: \"95%\" }}\n                    id=\"standard-secondary\"\n                    label=\"Comment\"\n                    name=\"comment\"\n                    value={comment}\n                    onChange={this._handleTextFieldChange}\n                    color=\"secondary\"\n                    required\n                  />\n                  <Button\n                    variant=\"contained\"\n                    color=\"secondary\"\n                    onClick={this.changeCargoStatus}\n                  >\n                    Submit\n                  </Button>\n                </div>\n              </DialogContent>\n            </Dialog>\n            <Snackbar\n              anchorOrigin={{ vertical, horizontal }}\n              open={openSnackBar}\n              message={message}\n              key={vertical + horizontal}\n            />\n          </div>\n        ) : (\n          <Snackbar\n            anchorOrigin={{ vertical, horizontal }}\n            open=\"true\"\n            message=\"Status i likuiduar\"\n            key={vertical + horizontal}\n          />\n        )}\n      </div>\n    );\n  }\n}\n\nexport default withRouter(withStyles(styles)(Tickets));\n"]},"metadata":{},"sourceType":"module"}