{"ast":null,"code":"import _defineProperty from\"/home/xhesina/Desktop/courier-server/src/main/react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _classCallCheck from\"/home/xhesina/Desktop/courier-server/src/main/react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/xhesina/Desktop/courier-server/src/main/react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/home/xhesina/Desktop/courier-server/src/main/react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/home/xhesina/Desktop/courier-server/src/main/react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/xhesina/Desktop/courier-server/src/main/react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import axios from\"axios\";import Table from\"@material-ui/core/Table\";import TableBody from\"@material-ui/core/TableBody\";import TableCell from\"@material-ui/core/TableCell\";import TableContainer from\"@material-ui/core/TableContainer\";import TableHead from\"@material-ui/core/TableHead\";import TableRow from\"@material-ui/core/TableRow\";import Paper from\"@material-ui/core/Paper\";import DialogTitle from\"@material-ui/core/DialogTitle\";import Dialog from\"@material-ui/core/Dialog\";import DialogContent from\"@material-ui/core/DialogContent\";import Chip from\"@material-ui/core/Chip\";import Select from\"@material-ui/core/Select\";import Divider from\"@material-ui/core/Divider\";import TextField from\"@material-ui/core/TextField\";import MenuItem from\"@material-ui/core/MenuItem\";import Button from\"@material-ui/core/Button\";import PrintIcon from'@material-ui/icons/Print';import PropTypes from'prop-types';import{withStyles}from\"@material-ui/styles\";import{withRouter}from'react-router-dom';var styles=function styles(theme){return{table:{minWidth:650}};};var Tickets=/*#__PURE__*/function(_Component){_inherits(Tickets,_Component);var _super=_createSuper(Tickets);function Tickets(props){var _this;_classCallCheck(this,Tickets);_this=_super.call(this,props);_this.goToPrintedForm=function(e,ticket){e.stopPropagation();_this.props.history.push({pathname:\"/print?ticket=\".concat(ticket.id),state:{ticket:ticket.id}});window.location.reload();};_this._handleTextFieldChange=function(e){_this.setState(_defineProperty({},e.target.name,e.target.value));};_this.changeStatus=function(e,ticket){e.stopPropagation();_this.setState({openStatusDialog:true});_this.setState({selectedTicketStatus:ticket});_this.setState({comment:\"\"});_this.setState({distributingState:false});if(ticket.ticketProgress[ticket.ticketProgress.length-1].cargoState.state==\"REJECTED\"){_this.setState({rejected:true});var query=localStorage.getItem(\"user\");axios.get(\"/user\",{params:{username:query}}).then(function(response){response.data.authorities.forEach(function(auth){if(auth.roleName===\"CLIENT\"){_this.setState({client:true});}else _this.setState({client:false});});}).catch(function(error){console.log(error);});}else{_this.setState({rejected:false});}axios.get(\"/cargoState\").then(function(response){console.log(response);_this.setState({cargoStates:response.data});}).catch(function(error){console.log(error);});};_this.handleClickOpen=function(ticket){_this.setState({open:true});_this.setState({selectedValue:ticket});};_this.handleClose=function(value){_this.setState({open:false});_this.setState({openStatusDialog:false});};_this.handleChange=function(event){_this.setState({status:event.target.value});if(event.target.value.state===\"DISTRIBUTING\"){_this.setState({distributingState:true});axios.get(\"/user/authority\").then(function(response){console.log(response);_this.setState({couriers:response.data});}).catch(function(error){console.log(error);});}else _this.setState({distributingState:false});};_this.handleCourierChange=function(event){_this.setState({courier:event.target.value});};_this.state={tickets:[],open:false,openStatusDialog:false,selectedValue:{},selectedTicketStatus:{},searchValue:\"\",cargoStates:[],status:{},distributingState:false,couriers:[],courier:\"\",comment:\"\",rejected:false,client:false};_this.handleClickOpen=_this.handleClickOpen.bind(_assertThisInitialized(_this));_this._handleTextFieldChange=_this._handleTextFieldChange.bind(_assertThisInitialized(_this));_this.changeCargoStatus=_this.changeCargoStatus.bind(_assertThisInitialized(_this));return _this;}_createClass(Tickets,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;axios.get(\"/ticket\").then(function(response){_this2.setState({tickets:response.data});}).catch(function(error){console.log(error);});}},{key:\"changeCargoStatus\",value:function changeCargoStatus(event){var _this3=this;var _this$state=this.state,comment=_this$state.comment,courier=_this$state.courier,selectedTicketStatus=_this$state.selectedTicketStatus,status=_this$state.status;var body={cargoStateId:status.id,comment:comment,ticketId:selectedTicketStatus.id,assignedId:courier.id};axios.post(\"/ticketProgress\",body,{\"Content-Type\":\"application/json\"}).then(function(response){console.log(response);_this3.setState({openStatusDialog:false});axios.get(\"/ticket\").then(function(response){_this3.setState({tickets:response.data});}).catch(function(error){console.log(error);});}).catch(function(error){console.log(\"login error\",error);});}},{key:\"render\",value:function render(){var _this4=this,_selectedValue$ticket,_selectedValue$ticket2,_selectedTicketStatus,_selectedTicketStatus2,_selectedTicketStatus3,_selectedTicketStatus4,_selectedTicketStatus5,_selectedTicketStatus6,_selectedTicketStatus7,_selectedTicketStatus8,_selectedTicketStatus9,_selectedTicketStatus10,_selectedTicketStatus11,_selectedTicketStatus12,_selectedTicketStatus13;var _this$state2=this.state,open=_this$state2.open,selectedValue=_this$state2.selectedValue,openStatusDialog=_this$state2.openStatusDialog,selectedTicketStatus=_this$state2.selectedTicketStatus,status=_this$state2.status,cargoStates=_this$state2.cargoStates,distributingState=_this$state2.distributingState,couriers=_this$state2.couriers,courier=_this$state2.courier,comment=_this$state2.comment,rejected=_this$state2.rejected,client=_this$state2.client;var classes=this.props.classes;var tickets=this.state.tickets.filter(function(ticket){return ticket.users.username.toLowerCase().indexOf(_this4.state.searchValue.toLowerCase())!==-1||ticket.address.toLowerCase().indexOf(_this4.state.searchValue.toLowerCase())!==-1||ticket.firstName.toLowerCase().indexOf(_this4.state.searchValue.toLowerCase())!==-1||ticket.lastName.toLowerCase().indexOf(_this4.state.searchValue.toLowerCase())!==-1||ticket.city.city.toLowerCase().indexOf(_this4.state.searchValue.toLowerCase())!==-1||ticket.state.toLowerCase().indexOf(_this4.state.searchValue.toLowerCase())!==-1||ticket.ticketProgress[ticket.ticketProgress.length-1].cargoState.state.toLowerCase().indexOf(_this4.state.searchValue.toLowerCase())!==-1;});var searchValue=this.state.searchValue;return/*#__PURE__*/React.createElement(\"div\",{style:{height:\"100%\"}},/*#__PURE__*/React.createElement(\"h3\",null,\"Ticket Listings\"),/*#__PURE__*/React.createElement(\"div\",null,\" \",/*#__PURE__*/React.createElement(TextField,{style:{width:\"100%\"},id:\"standard-basic\",label:\"Search\",variant:\"outlined\",name:\"searchValue\",value:searchValue,onChange:this._handleTextFieldChange})),/*#__PURE__*/React.createElement(Dialog,{onClose:this.handleClose,\"aria-labelledby\":\"simple-dialog-title\",open:open,maxWidth:\"lg\",fullWidth:true},/*#__PURE__*/React.createElement(DialogTitle,{id:\"simple-dialog-title\"},\"Ticket progress\"),/*#__PURE__*/React.createElement(Divider,null),/*#__PURE__*/React.createElement(DialogContent,{style:{padding:\"30px\"}},/*#__PURE__*/React.createElement(TableContainer,{component:Paper,style:{marginTop:\"20px\"}},/*#__PURE__*/React.createElement(Table,{className:classes.table,\"aria-label\":\"simple table\"},/*#__PURE__*/React.createElement(TableHead,null,/*#__PURE__*/React.createElement(TableRow,null,/*#__PURE__*/React.createElement(TableCell,{align:\"left\"},\"Status\"),/*#__PURE__*/React.createElement(TableCell,{align:\"left\"},\"Date\"),/*#__PURE__*/React.createElement(TableCell,{align:\"left\"},\"Name\"),/*#__PURE__*/React.createElement(TableCell,{align:\"left\"},\"Assigned to\"),/*#__PURE__*/React.createElement(TableCell,{align:\"left\"},\"Comment\"))),/*#__PURE__*/React.createElement(TableBody,null,((_selectedValue$ticket=selectedValue.ticketProgress)===null||_selectedValue$ticket===void 0?void 0:_selectedValue$ticket.length)?selectedValue===null||selectedValue===void 0?void 0:(_selectedValue$ticket2=selectedValue.ticketProgress)===null||_selectedValue$ticket2===void 0?void 0:_selectedValue$ticket2.map(function(progress){var _progress$assigned;return/*#__PURE__*/React.createElement(TableRow,{key:progress.id},/*#__PURE__*/React.createElement(TableCell,{align:\"left\"},/*#__PURE__*/React.createElement(Chip,{label:progress.cargoState.description,variant:\"default\",style:{backgroundColor:progress.cargoState.state===\"CREATED\"?\"#c0bdc1e3\":progress.cargoState.state===\"STORED\"?\"#ff7100\":progress.cargoState.state===\"DISTRIBUTING\"?\"#4959bf\":progress.cargoState.state===\"DELIVERED\"?\"#00bf40\":\"\"}})),/*#__PURE__*/React.createElement(TableCell,{align:\"left\"},\" \",new Date(progress.date).toLocaleDateString(\"en-US\"),\" \",new Date(progress.date).toLocaleTimeString(\"en-US\"),\" \"),/*#__PURE__*/React.createElement(TableCell,{align:\"left\"},progress.users.firstName,\" \",progress.users.lastName),/*#__PURE__*/React.createElement(TableCell,{align:\"left\"},progress===null||progress===void 0?void 0:(_progress$assigned=progress.assigned)===null||_progress$assigned===void 0?void 0:_progress$assigned.firstName),/*#__PURE__*/React.createElement(TableCell,{align:\"left\"},progress.comment));}):\"No data\"))))),/*#__PURE__*/React.createElement(TableContainer,{component:Paper,style:{marginTop:\"20px\"}},/*#__PURE__*/React.createElement(Table,{className:classes.table,\"aria-label\":\"simple table\"},/*#__PURE__*/React.createElement(TableHead,null,/*#__PURE__*/React.createElement(TableRow,null,/*#__PURE__*/React.createElement(TableCell,null,\"Date\"),/*#__PURE__*/React.createElement(TableCell,null,\"NO\"),/*#__PURE__*/React.createElement(TableCell,null,\"State\"),/*#__PURE__*/React.createElement(TableCell,{align:\"right\"},\"First name\"),/*#__PURE__*/React.createElement(TableCell,{align:\"right\"},\"Last name\"),/*#__PURE__*/React.createElement(TableCell,{align:\"right\"},\"Mobile\"),/*#__PURE__*/React.createElement(TableCell,{align:\"right\"},\"Comment\"),/*#__PURE__*/React.createElement(TableCell,{align:\"right\"},\"Address\"),/*#__PURE__*/React.createElement(TableCell,{align:\"right\"},\"City\"),/*#__PURE__*/React.createElement(TableCell,{align:\"right\"},\"State\"),/*#__PURE__*/React.createElement(TableCell,{align:\"right\"},\"Price\"),/*#__PURE__*/React.createElement(TableCell,{align:\"right\"},\"Curreny\"),/*#__PURE__*/React.createElement(TableCell,{align:\"right\"}))),/*#__PURE__*/React.createElement(TableBody,null,(tickets===null||tickets===void 0?void 0:tickets.length)?tickets.map(function(ticket){return/*#__PURE__*/React.createElement(TableRow,{key:ticket.id,onClick:function onClick(){return _this4.handleClickOpen(ticket);},style:{cursor:\"pointer\"}},/*#__PURE__*/React.createElement(TableCell,{component:\"th\",scope:\"row\"},new Date(ticket.date).toLocaleDateString(\"en-US\"),\" \",new Date(ticket.date).toLocaleTimeString(\"en-US\")),/*#__PURE__*/React.createElement(TableCell,{align:\"right\"},ticket.no),/*#__PURE__*/React.createElement(TableCell,{align:\"right\",onClick:function onClick(e){_this4.changeStatus(e,ticket);}},\" \",/*#__PURE__*/React.createElement(Chip,{label:ticket.ticketProgress[ticket.ticketProgress.length-1].cargoState.description,variant:\"default\",style:{backgroundColor:ticket.ticketProgress[ticket.ticketProgress.length-1].cargoState.state===\"CREATED\"?\"#c0bdc1e3\":ticket.ticketProgress[ticket.ticketProgress.length-1].cargoState.state===\"STORED\"?\"#ff7100\":ticket.ticketProgress[ticket.ticketProgress.length-1].cargoState.state===\"DISTRIBUTING\"?\"#4959bf\":ticket.ticketProgress[ticket.ticketProgress.length-1].cargoState.state===\"DELIVERED\"?\"#00bf40\":ticket.ticketProgress[ticket.ticketProgress.length-1].cargoState.state===\"REJECTED\"?\"#ff2424\":\"\"}})),/*#__PURE__*/React.createElement(TableCell,{align:\"right\"},ticket.firstName),/*#__PURE__*/React.createElement(TableCell,{align:\"right\"},ticket.lastName),/*#__PURE__*/React.createElement(TableCell,{align:\"right\"},ticket.mobile),/*#__PURE__*/React.createElement(TableCell,{align:\"right\"},ticket.comment),/*#__PURE__*/React.createElement(TableCell,{align:\"right\"},ticket.address),/*#__PURE__*/React.createElement(TableCell,{align:\"right\"},ticket.city.city),/*#__PURE__*/React.createElement(TableCell,{align:\"right\"},ticket.state),/*#__PURE__*/React.createElement(TableCell,{align:\"right\"},ticket.price),/*#__PURE__*/React.createElement(TableCell,{align:\"right\"},ticket.currency.currency),/*#__PURE__*/React.createElement(TableCell,{align:\"right\"},/*#__PURE__*/React.createElement(PrintIcon,{style:{color:\"#4c4a4adb\"},onClick:function onClick(e){_this4.goToPrintedForm(e,ticket);}})));}):\"No data\"))),/*#__PURE__*/React.createElement(Dialog,{onClose:this.handleClose,\"aria-labelledby\":\"simple-dialog-title\",open:openStatusDialog,maxWidth:\"sm\",fullWidth:true},/*#__PURE__*/React.createElement(DialogTitle,{id:\"simple-dialog-title\"},\"Change ticket status\"),/*#__PURE__*/React.createElement(Divider,null),/*#__PURE__*/React.createElement(DialogContent,{style:{padding:\"30px\",textAlign:\"center\"}},/*#__PURE__*/React.createElement(Chip,{label:selectedTicketStatus===null||selectedTicketStatus===void 0?void 0:(_selectedTicketStatus=selectedTicketStatus.ticketProgress)===null||_selectedTicketStatus===void 0?void 0:(_selectedTicketStatus2=_selectedTicketStatus[(selectedTicketStatus===null||selectedTicketStatus===void 0?void 0:(_selectedTicketStatus3=selectedTicketStatus.ticketProgress)===null||_selectedTicketStatus3===void 0?void 0:_selectedTicketStatus3.length)-1].cargoState)===null||_selectedTicketStatus2===void 0?void 0:_selectedTicketStatus2.description,variant:\"default\",style:{backgroundColor:(selectedTicketStatus===null||selectedTicketStatus===void 0?void 0:(_selectedTicketStatus4=selectedTicketStatus.ticketProgress)===null||_selectedTicketStatus4===void 0?void 0:_selectedTicketStatus4[(selectedTicketStatus===null||selectedTicketStatus===void 0?void 0:(_selectedTicketStatus5=selectedTicketStatus.ticketProgress)===null||_selectedTicketStatus5===void 0?void 0:_selectedTicketStatus5.length)-1].cargoState.state)===\"CREATED\"?\"#c0bdc1e3\":(selectedTicketStatus===null||selectedTicketStatus===void 0?void 0:(_selectedTicketStatus6=selectedTicketStatus.ticketProgress)===null||_selectedTicketStatus6===void 0?void 0:_selectedTicketStatus6[(selectedTicketStatus===null||selectedTicketStatus===void 0?void 0:(_selectedTicketStatus7=selectedTicketStatus.ticketProgress)===null||_selectedTicketStatus7===void 0?void 0:_selectedTicketStatus7.length)-1].cargoState.state)===\"STORED\"?\"#ff7100\":(selectedTicketStatus===null||selectedTicketStatus===void 0?void 0:(_selectedTicketStatus8=selectedTicketStatus.ticketProgress)===null||_selectedTicketStatus8===void 0?void 0:_selectedTicketStatus8[(selectedTicketStatus===null||selectedTicketStatus===void 0?void 0:(_selectedTicketStatus9=selectedTicketStatus.ticketProgress)===null||_selectedTicketStatus9===void 0?void 0:_selectedTicketStatus9.length)-1].cargoState.state)===\"DISTRIBUTING\"?\"#4959bf\":(selectedTicketStatus===null||selectedTicketStatus===void 0?void 0:(_selectedTicketStatus10=selectedTicketStatus.ticketProgress)===null||_selectedTicketStatus10===void 0?void 0:_selectedTicketStatus10[(selectedTicketStatus===null||selectedTicketStatus===void 0?void 0:(_selectedTicketStatus11=selectedTicketStatus.ticketProgress)===null||_selectedTicketStatus11===void 0?void 0:_selectedTicketStatus11.length)-1].cargoState.state)===\"DELIVERED\"?\"#00bf40\":(selectedTicketStatus===null||selectedTicketStatus===void 0?void 0:(_selectedTicketStatus12=selectedTicketStatus.ticketProgress)===null||_selectedTicketStatus12===void 0?void 0:_selectedTicketStatus12[(selectedTicketStatus===null||selectedTicketStatus===void 0?void 0:(_selectedTicketStatus13=selectedTicketStatus.ticketProgress)===null||_selectedTicketStatus13===void 0?void 0:_selectedTicketStatus13.length)-1].cargoState.state)===\"REJECTED\"?\"#ff2424\":\"\"}}),rejected&&client?/*#__PURE__*/React.createElement(\"div\",null,\"Confirm Rejection\"):/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Select,{labelId:\"demo-simple-select-label\",id:\"demo-simple-select\",value:status,onChange:this.handleChange,style:{width:\"100%\",marginTop:\"40px\"}},cargoStates.map(function(state){return/*#__PURE__*/React.createElement(MenuItem,{key:state.id,value:state},state.description);})),distributingState?/*#__PURE__*/React.createElement(Select,{labelId:\"demo-simple-select-label\",id:\"demo-simple-select\",value:courier,onChange:this.handleCourierChange,style:{width:\"100%\",marginTop:\"40px\"}},couriers.map(function(courier){return/*#__PURE__*/React.createElement(MenuItem,{key:courier.id,value:courier},courier.username);})):\"\",/*#__PURE__*/React.createElement(TextField,{style:{padding:\"10px\",width:\"95%\"},id:\"standard-secondary\",label:\"Comment\",name:\"comment\",value:comment,onChange:this._handleTextFieldChange,color:\"secondary\",required:true}),/*#__PURE__*/React.createElement(Button,{variant:\"contained\",color:\"secondary\",onClick:this.changeCargoStatus},\"Submit\")))));}}]);return Tickets;}(Component);Tickets.contextTypes={router:PropTypes.func};export default withRouter(withStyles(styles)(Tickets));","map":{"version":3,"sources":["/home/xhesina/Desktop/courier-server/src/main/react-app/src/TicketListings/tickets.js"],"names":["React","Component","axios","Table","TableBody","TableCell","TableContainer","TableHead","TableRow","Paper","DialogTitle","Dialog","DialogContent","Chip","Select","Divider","TextField","MenuItem","Button","PrintIcon","PropTypes","withStyles","withRouter","styles","theme","table","minWidth","Tickets","props","goToPrintedForm","e","ticket","stopPropagation","history","push","pathname","id","state","window","location","reload","_handleTextFieldChange","setState","target","name","value","changeStatus","openStatusDialog","selectedTicketStatus","comment","distributingState","ticketProgress","length","cargoState","rejected","query","localStorage","getItem","get","params","username","then","response","data","authorities","forEach","auth","roleName","client","catch","error","console","log","cargoStates","handleClickOpen","open","selectedValue","handleClose","handleChange","event","status","couriers","handleCourierChange","courier","tickets","searchValue","bind","changeCargoStatus","body","cargoStateId","ticketId","assignedId","post","classes","filter","users","toLowerCase","indexOf","address","firstName","lastName","city","height","width","padding","marginTop","map","progress","description","backgroundColor","Date","date","toLocaleDateString","toLocaleTimeString","assigned","cursor","no","mobile","price","currency","color","textAlign","contextTypes","router","func"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport axios from \"axios\";\nimport Table from \"@material-ui/core/Table\";\nimport TableBody from \"@material-ui/core/TableBody\";\nimport TableCell from \"@material-ui/core/TableCell\";\nimport TableContainer from \"@material-ui/core/TableContainer\";\nimport TableHead from \"@material-ui/core/TableHead\";\nimport TableRow from \"@material-ui/core/TableRow\";\nimport Paper from \"@material-ui/core/Paper\";\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\nimport Dialog from \"@material-ui/core/Dialog\";\nimport DialogContent from \"@material-ui/core/DialogContent\";\nimport Chip from \"@material-ui/core/Chip\";\nimport Select from \"@material-ui/core/Select\";\nimport Divider from \"@material-ui/core/Divider\";\nimport TextField from \"@material-ui/core/TextField\";\nimport MenuItem from \"@material-ui/core/MenuItem\";\nimport Button from \"@material-ui/core/Button\";\nimport PrintIcon from '@material-ui/icons/Print';\nimport PropTypes from 'prop-types';\nimport { withStyles } from \"@material-ui/styles\";\nimport { withRouter } from 'react-router-dom';\n\n\nconst styles = (theme) => ({\n  table: {\n    minWidth: 650,\n  },\n});\n\nclass Tickets extends Component {\n  static contextTypes = {\n    router: PropTypes.func\n}\n  constructor(props) {\n    super(props);\n    this.state = {\n      tickets: [],\n      open: false,\n      openStatusDialog: false,\n      selectedValue: {},\n      selectedTicketStatus: {},\n      searchValue: \"\",\n      cargoStates: [],\n      status: {},\n      distributingState: false,\n      couriers: [],\n      courier: \"\",\n      comment:\"\",\n      rejected: false,\n      client:false\n    };\n    this.handleClickOpen = this.handleClickOpen.bind(this);\n    this._handleTextFieldChange = this._handleTextFieldChange.bind(this);\n    this.changeCargoStatus = this.changeCargoStatus.bind(this);\n    \n     \n  }\n \n  goToPrintedForm = (e,ticket) => {\n    e.stopPropagation();\n    this.props.history.push({\n      pathname: `/print?ticket=${ticket.id}`,\n      state: {ticket: ticket.id}\n    }); \n    window.location.reload();\n  }\n  _handleTextFieldChange = (e) => {\n    this.setState({\n      [e.target.name]: e.target.value,\n    });\n  };\n  changeStatus = (e, ticket) => {\n    e.stopPropagation();\n    this.setState({ openStatusDialog: true });\n    this.setState({ selectedTicketStatus: ticket });\n    this.setState({ comment: \"\" });\n    this.setState({ distributingState: false });\n    if(ticket.ticketProgress[ticket.ticketProgress.length -1].cargoState.state == \"REJECTED\"){\n      this.setState({rejected : true});\n      let query = localStorage.getItem(\"user\");\n      axios\n        .get(\"/user\", {\n          params: {\n            username: query,\n          },\n        })\n        .then((response) => {\n  \n          response.data.authorities.forEach((auth) => {\n            if (auth.roleName === \"CLIENT\") {\n              this.setState({client: true})\n            } else  this.setState({client: false})\n          });\n        })\n        .catch((error) => {\n          console.log(error);\n        });\n    }\n    else {this.setState({rejected : false})}\n    axios\n      .get(\"/cargoState\")\n      .then((response) => {\n        console.log(response);\n        this.setState({ cargoStates: response.data });\n      })\n      .catch((error) => {\n        console.log(error);\n      });\n  };\n  componentDidMount() {\n    axios\n      .get(\"/ticket\")\n      .then((response) => {\n        this.setState({ tickets: response.data });\n      })\n      .catch((error) => {\n        console.log(error);\n      });\n  }\n  handleClickOpen = (ticket) => {\n    this.setState({ open: true });\n    this.setState({ selectedValue: ticket });\n  };\n\n  handleClose = (value) => {\n    this.setState({ open: false });\n    this.setState({ openStatusDialog: false });\n  };\n  handleChange = (event) => {\n    this.setState({ status: event.target.value });\n    if (event.target.value.state === \"DISTRIBUTING\") {\n      this.setState({ distributingState: true });\n      axios\n        .get(\"/user/authority\")\n        .then((response) => {\n          console.log(response);\n          this.setState({ couriers: response.data });\n        })\n        .catch((error) => {\n          console.log(error);\n        });\n    } else  this.setState({ distributingState: false });\n  };\n  handleCourierChange = (event) => {\n    this.setState({ courier: event.target.value });\n  };\n  changeCargoStatus(event){\n    const {\n      comment,courier,selectedTicketStatus,status\n    } = this.state;\n    let body = {\n      cargoStateId:status.id,\n      comment:comment,\n      ticketId:selectedTicketStatus.id,\n      assignedId:courier.id\n    }\n    axios\n    .post(\"/ticketProgress\", body, { \"Content-Type\": \"application/json\" })\n    .then((response) => {\n      console.log(response);\n      this.setState({ openStatusDialog: false });\n      axios\n      .get(\"/ticket\")\n      .then((response) => {\n        this.setState({ tickets: response.data });\n      })\n      .catch((error) => {\n        console.log(error);\n      });\n    })\n    .catch((error) => {\n      console.log(\"login error\", error);\n    });   \n  }\n  render() {\n    const {\n      open,\n      selectedValue,\n      openStatusDialog,\n      selectedTicketStatus,\n      status,\n      cargoStates,\n      distributingState,\n      couriers,\n      courier,\n      comment, \n      rejected,\n      client\n\n    } = this.state;\n    const { classes } = this.props;\n    let tickets = this.state.tickets.filter((ticket) => {\n      return (\n        ticket.users.username\n          .toLowerCase()\n          .indexOf(this.state.searchValue.toLowerCase()) !== -1 ||\n        ticket.address\n          .toLowerCase()\n          .indexOf(this.state.searchValue.toLowerCase()) !== -1 ||\n        ticket.firstName\n          .toLowerCase()\n          .indexOf(this.state.searchValue.toLowerCase()) !== -1 ||\n        ticket.lastName\n          .toLowerCase()\n          .indexOf(this.state.searchValue.toLowerCase()) !== -1 ||\n        ticket.city.city\n          .toLowerCase()\n          .indexOf(this.state.searchValue.toLowerCase()) !== -1 ||\n        ticket.state\n          .toLowerCase()\n          .indexOf(this.state.searchValue.toLowerCase()) !== -1 ||\n        ticket.ticketProgress[ticket.ticketProgress.length - 1].cargoState.state\n          .toLowerCase()\n          .indexOf(this.state.searchValue.toLowerCase()) !== -1\n      );\n    });\n    let searchValue = this.state.searchValue;\n    return (\n      <div style={{ height: \"100%\" }}>\n        <h3>Ticket Listings</h3>\n        <div>\n          {\" \"}\n          <TextField\n            style={{ width: \"100%\" }}\n            id=\"standard-basic\"\n            label=\"Search\"\n            variant=\"outlined\"\n            name=\"searchValue\"\n            value={searchValue}\n            onChange={this._handleTextFieldChange}\n          />\n        </div>\n        <Dialog\n          onClose={this.handleClose}\n          aria-labelledby=\"simple-dialog-title\"\n          open={open}\n          maxWidth={\"lg\"}\n          fullWidth={true}\n        >\n          <DialogTitle id=\"simple-dialog-title\">Ticket progress</DialogTitle>\n          <Divider />\n          <DialogContent style={{ padding: \"30px\" }}>\n            <TableContainer component={Paper} style={{ marginTop: \"20px\" }}>\n              <Table className={classes.table} aria-label=\"simple table\">\n                <TableHead>\n                  <TableRow>\n                    <TableCell align=\"left\">Status</TableCell>\n                    <TableCell align=\"left\">Date</TableCell>\n                    <TableCell align=\"left\">Name</TableCell>\n                    <TableCell align=\"left\">Assigned to</TableCell>\n                    <TableCell align=\"left\">Comment</TableCell>\n                  </TableRow>\n                </TableHead>\n                <TableBody>\n                  {selectedValue.ticketProgress?.length\n                    ? selectedValue?.ticketProgress?.map((progress) => (\n                        <TableRow key={progress.id}>\n                          <TableCell align=\"left\">\n                            <Chip\n                              label={progress.cargoState.description}\n                              variant=\"default\"\n                              style={{\n                                backgroundColor:\n                                  progress.cargoState.state === \"CREATED\"\n                                    ? \"#c0bdc1e3\"\n                                    : progress.cargoState.state === \"STORED\"\n                                    ? \"#ff7100\"\n                                    : progress.cargoState.state ===\n                                      \"DISTRIBUTING\"\n                                    ? \"#4959bf\"\n                                    : progress.cargoState.state === \"DELIVERED\"\n                                    ? \"#00bf40\"\n                                    : \"\",\n                              }}\n                            />\n                          </TableCell>\n                          <TableCell align=\"left\">\n                            {\" \"}\n                            {new Date(progress.date).toLocaleDateString(\n                              \"en-US\"\n                            )}{\" \"}\n                            {new Date(progress.date).toLocaleTimeString(\n                              \"en-US\"\n                            )}{\" \"}\n                          </TableCell>\n                          <TableCell align=\"left\">\n                            {progress.users.firstName} {progress.users.lastName}\n                          </TableCell>\n                          <TableCell align=\"left\">\n                            {progress?.assigned?.firstName}\n                          </TableCell>\n                          <TableCell align=\"left\">{progress.comment}</TableCell>\n                        </TableRow>\n                      ))\n                    : \"No data\"}\n                </TableBody>\n              </Table>\n            </TableContainer>\n          </DialogContent>\n        </Dialog>\n        <TableContainer component={Paper} style={{ marginTop: \"20px\" }}>\n          <Table className={classes.table} aria-label=\"simple table\">\n            <TableHead>\n              <TableRow>\n                <TableCell>Date</TableCell>\n                <TableCell>NO</TableCell>\n                <TableCell>State</TableCell>\n                <TableCell align=\"right\">First name</TableCell>\n                <TableCell align=\"right\">Last name</TableCell>\n                <TableCell align=\"right\">Mobile</TableCell>\n                <TableCell align=\"right\">Comment</TableCell>\n                <TableCell align=\"right\">Address</TableCell>\n                <TableCell align=\"right\">City</TableCell>\n                <TableCell align=\"right\">State</TableCell>\n                <TableCell align=\"right\">Price</TableCell>\n                <TableCell align=\"right\">Curreny</TableCell>\n                <TableCell align=\"right\"></TableCell>\n              </TableRow>\n            </TableHead>\n            <TableBody>\n              {tickets?.length\n                ? tickets.map((ticket) => (\n                    <TableRow\n                      key={ticket.id}\n                      onClick={() => this.handleClickOpen(ticket)}\n                      style={{ cursor: \"pointer\" }}\n                    >\n                      <TableCell component=\"th\" scope=\"row\">\n                        {new Date(ticket.date).toLocaleDateString(\"en-US\")}{\" \"}\n                        {new Date(ticket.date).toLocaleTimeString(\"en-US\")}\n                      </TableCell>\n                      <TableCell align=\"right\">{ticket.no}</TableCell>\n                      <TableCell\n                        align=\"right\"\n                        onClick={(e) => {\n                          this.changeStatus(e, ticket);\n                        }}\n                      >\n                        {\" \"}\n                        <Chip\n                          label={\n                            ticket.ticketProgress[\n                              ticket.ticketProgress.length - 1\n                            ].cargoState.description\n                          }\n                          variant=\"default\"\n                          style={{\n                            backgroundColor:\n                              ticket.ticketProgress[\n                                ticket.ticketProgress.length - 1\n                              ].cargoState.state === \"CREATED\"\n                                ? \"#c0bdc1e3\"\n                                : ticket.ticketProgress[\n                                    ticket.ticketProgress.length - 1\n                                  ].cargoState.state === \"STORED\"\n                                ? \"#ff7100\"\n                                : ticket.ticketProgress[\n                                    ticket.ticketProgress.length - 1\n                                  ].cargoState.state === \"DISTRIBUTING\"\n                                ? \"#4959bf\"\n                                : ticket.ticketProgress[\n                                    ticket.ticketProgress.length - 1\n                                  ].cargoState.state === \"DELIVERED\"\n                                ? \"#00bf40\"\n                                : ticket.ticketProgress[\n                                    ticket.ticketProgress.length - 1\n                                  ].cargoState.state === \"REJECTED\"\n                                ? \"#ff2424\"\n                                : \"\",\n                          }}\n                        />\n                      </TableCell>\n                      <TableCell align=\"right\">{ticket.firstName}</TableCell>\n                      <TableCell align=\"right\">{ticket.lastName}</TableCell>\n                      <TableCell align=\"right\">{ticket.mobile}</TableCell>\n                      <TableCell align=\"right\">{ticket.comment}</TableCell>\n                      <TableCell align=\"right\">{ticket.address}</TableCell>\n                      <TableCell align=\"right\">{ticket.city.city}</TableCell>\n                      <TableCell align=\"right\">{ticket.state}</TableCell>\n                      <TableCell align=\"right\">{ticket.price}</TableCell>\n                      <TableCell align=\"right\">\n                        {ticket.currency.currency}\n                      </TableCell>\n                      <TableCell align=\"right\"><PrintIcon style={{color:\"#4c4a4adb\"}}   onClick={(e) => {\n                          this.goToPrintedForm(e, ticket);\n                        }} /></TableCell>\n                    </TableRow>\n                  ))\n                : \"No data\"}\n            </TableBody>\n          </Table>\n        </TableContainer>\n\n\n        <Dialog\n          onClose={this.handleClose}\n          aria-labelledby=\"simple-dialog-title\"\n          open={openStatusDialog}\n          maxWidth={\"sm\"}\n          fullWidth={true}\n        >\n          <DialogTitle id=\"simple-dialog-title\">\n            Change ticket status\n          </DialogTitle>\n          <Divider />\n          <DialogContent style={{ padding: \"30px\", textAlign: \"center\" }}>\n            <Chip\n              label={\n                selectedTicketStatus?.ticketProgress?.[\n                  selectedTicketStatus?.ticketProgress?.length - 1\n                ].cargoState?.description\n              }\n              variant=\"default\"\n              style={{\n                backgroundColor:\n                  selectedTicketStatus?.ticketProgress?.[\n                    selectedTicketStatus?.ticketProgress?.length - 1\n                  ].cargoState.state === \"CREATED\"\n                    ? \"#c0bdc1e3\"\n                    : selectedTicketStatus?.ticketProgress?.[\n                        selectedTicketStatus?.ticketProgress?.length - 1\n                      ].cargoState.state === \"STORED\"\n                    ? \"#ff7100\"\n                    : selectedTicketStatus?.ticketProgress?.[\n                        selectedTicketStatus?.ticketProgress?.length - 1\n                      ].cargoState.state === \"DISTRIBUTING\"\n                    ? \"#4959bf\"\n                    : selectedTicketStatus?.ticketProgress?.[\n                        selectedTicketStatus?.ticketProgress?.length - 1\n                      ].cargoState.state === \"DELIVERED\"\n                    ? \"#00bf40\"\n                    : selectedTicketStatus?.ticketProgress?.[\n                        selectedTicketStatus?.ticketProgress?.length - 1\n                      ].cargoState.state === \"REJECTED\"\n                    ? \"#ff2424\"\n                    : \"\",\n              }}\n            />\n            {rejected && client ?  <div>Confirm Rejection</div> :\n            <div>\n              <Select\n              labelId=\"demo-simple-select-label\"\n              id=\"demo-simple-select\"\n              value={status}\n              onChange={this.handleChange}\n              style={{ width: \"100%\", marginTop: \"40px\" }}\n            >\n              {cargoStates.map((state) => (\n                <MenuItem key={state.id} value={state}>\n                  {state.description}\n                </MenuItem>\n              ))}\n            </Select>\n          \n            {distributingState ? (\n              <Select\n                labelId=\"demo-simple-select-label\"\n                id=\"demo-simple-select\"\n                value={courier}\n                onChange={this.handleCourierChange}\n                style={{ width: \"100%\", marginTop: \"40px\" }}\n              >\n                {couriers.map((courier) => (\n                  <MenuItem key={courier.id} value={courier}>\n                    {courier.username}\n                  </MenuItem>\n                ))}\n              </Select>\n            ) : (\n              \"\"\n            )}\n              <TextField\n                style={{ padding: \"10px\", width: \"95%\" }}\n                id=\"standard-secondary\"\n                label=\"Comment\"\n                name=\"comment\"\n                value={comment}\n                onChange={this._handleTextFieldChange}\n                color=\"secondary\"\n                required\n              />\n               <Button variant=\"contained\" color=\"secondary\" onClick={this.changeCargoStatus}>\n                Submit\n              </Button>\n            </div>}\n            \n          </DialogContent>\n        </Dialog>\n      </div>\n    );\n  }\n}\n\nexport default withRouter(withStyles(styles)(Tickets));\n"]},"metadata":{},"sourceType":"module"}