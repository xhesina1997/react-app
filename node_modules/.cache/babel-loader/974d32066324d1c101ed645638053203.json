{"ast":null,"code":"import _defineProperty from\"/home/xhesina/Desktop/courier-server/src/main/react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _classCallCheck from\"/home/xhesina/Desktop/courier-server/src/main/react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/xhesina/Desktop/courier-server/src/main/react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/home/xhesina/Desktop/courier-server/src/main/react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/home/xhesina/Desktop/courier-server/src/main/react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/xhesina/Desktop/courier-server/src/main/react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import Wrapper from\"../Wrapper\";import PersonIcon from\"@material-ui/icons/Person\";import Button from\"@material-ui/core/Button\";import Chip from\"@material-ui/core/Chip\";import Divider from\"@material-ui/core/Divider\";import TextField from\"@material-ui/core/TextField\";import Grid from\"@material-ui/core/Grid\";import Snackbar from\"@material-ui/core/Snackbar\";import ClearIcon from'@material-ui/icons/Clear';import Fab from\"@material-ui/core/Fab\";import axios from\"axios\";var UserProfile=/*#__PURE__*/function(_Component){_inherits(UserProfile,_Component);var _super=_createSuper(UserProfile);function UserProfile(props){var _this;_classCallCheck(this,UserProfile);_this=_super.call(this,props);_this.changePassword=function(){_this.setState({changePassword:true});};_this._handleTextFieldChange=function(e){_this.setState(_defineProperty({},e.target.name,e.target.value));};_this.state={user:\"\",oldPassword:\"\",newPassWord:\"\",confirmPassword:\"\",changePassword:false,open:false,vertical:\"top\",horizontal:\"center\",message:\"\"};_this.handleSubmit=_this.handleSubmit.bind(_assertThisInitialized(_this));_this._handleTextFieldChange=_this._handleTextFieldChange.bind(_assertThisInitialized(_this));return _this;}_createClass(UserProfile,[{key:\"handleSubmit\",value:function handleSubmit(event){var _this2=this;var _this$state=this.state,oldPassword=_this$state.oldPassword,newPassWord=_this$state.newPassWord,confirmPassword=_this$state.confirmPassword;if(newPassWord===confirmPassword){var formData=new FormData();formData.append(\"oldPassword\",oldPassword);formData.append(\"newPassword\",confirmPassword);axios.post(\"/user/updatePassword\",formData,{headers:{\"Content-Type\":\"multipart/form-data\"}}).then(function(response){localStorage[\"token\"]=response.config.headers.Authorization;_this2.setState({open:true,vertical:\"bottom\",horizontal:\"center\",message:\"Password changed successfully!\"});_this2.setState({changePassword:false});}).catch(function(error){console.log(error);_this2.setState({open:true,vertical:\"bottom\",horizontal:\"center\",message:\"Old password is incorrect!\"});});}else{this.setState({open:true,vertical:\"bottom\",horizontal:\"center\",message:\"Passwords dont match!\"});}event.preventDefault();}},{key:\"componentDidMount\",value:function componentDidMount(){var _this3=this;var query=localStorage.getItem(\"user\");axios.get(\"/user\",{params:{username:query}}).then(function(response){console.log(response.data);_this3.setState({user:response.data});}).catch(function(error){console.log(error);});}},{key:\"render\",value:function render(){var _this4=this,_user$authorities;var _this$state2=this.state,user=_this$state2.user,oldPassword=_this$state2.oldPassword,newPassWord=_this$state2.newPassWord,confirmPassword=_this$state2.confirmPassword,open=_this$state2.open,vertical=_this$state2.vertical,horizontal=_this$state2.horizontal,message=_this$state2.message;return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Wrapper,null,this.state.changePassword?/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"h3\",null,\"Change password\"),/*#__PURE__*/React.createElement(Fab,{style:{float:\"right\"},color:\"secondary\",\"aria-label\":\"add\",onClick:function onClick(){_this4.setState({changePassword:!_this4.state.changePassword});}},/*#__PURE__*/React.createElement(ClearIcon,null)),/*#__PURE__*/React.createElement(\"form\",{autoComplete:\"off\",onSubmit:this.handleSubmit},/*#__PURE__*/React.createElement(Grid,{container:true,spacing:4},/*#__PURE__*/React.createElement(Grid,{item:true,xs:12,sm:12},/*#__PURE__*/React.createElement(TextField,{style:{padding:\"10px\",width:\"95%\"},type:\"password\",id:\"standard-secondary\",label:\"Old password\",name:\"oldPassword\",value:oldPassword,onChange:this._handleTextFieldChange,color:\"secondary\",required:true})),/*#__PURE__*/React.createElement(Grid,{item:true,xs:12,sm:12},/*#__PURE__*/React.createElement(TextField,{style:{padding:\"10px\",width:\"95%\"},type:\"password\",id:\"standard-secondary\",label:\"New password\",name:\"newPassWord\",value:newPassWord,onChange:this._handleTextFieldChange,color:\"secondary\",required:true})),/*#__PURE__*/React.createElement(Grid,{item:true,xs:12,sm:12},/*#__PURE__*/React.createElement(TextField,{style:{padding:\"10px\",width:\"95%\"},type:\"password\",id:\"standard-secondary\",label:\"Confirm password\",name:\"confirmPassword\",value:confirmPassword,onChange:this._handleTextFieldChange,color:\"secondary\",required:true})),/*#__PURE__*/React.createElement(Grid,{item:true,xs:12},/*#__PURE__*/React.createElement(Button,{variant:\"contained\",color:\"secondary\",type:\"submit\"},\"Submit\")))),/*#__PURE__*/React.createElement(Snackbar,{anchorOrigin:{vertical:vertical,horizontal:horizontal},open:open,message:message,key:vertical+horizontal})):/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Button,{variant:\"contained\",style:{float:\"right\"},color:\"secondary\",onClick:this.changePassword},\"Change password\"),/*#__PURE__*/React.createElement(\"h3\",null,\" My profile \"),/*#__PURE__*/React.createElement(\"div\",{style:{textAlign:\"center\"}},/*#__PURE__*/React.createElement(PersonIcon,{style:{fontSize:\"150px\",color:\"#e2e0e0\",margin:\"auto\"}})),/*#__PURE__*/React.createElement(\"div\",{style:{textAlign:\"left\",marginLeft:\"80px\"}},/*#__PURE__*/React.createElement(\"div\",{style:{margin:\"auto\",padding:\"29px\"}},/*#__PURE__*/React.createElement(\"span\",{style:{fontWeight:\"bold\"}},\"First name: \"),\" \",/*#__PURE__*/React.createElement(\"span\",{style:{paddingLeft:\"20px\"}},user.firstName),\" \"),\" \",/*#__PURE__*/React.createElement(Divider,{light:true}),/*#__PURE__*/React.createElement(\"div\",{style:{margin:\"auto\",padding:\"29px\"}},/*#__PURE__*/React.createElement(\"span\",{style:{fontWeight:\"bold\"}},\"Last name:\"),\" \",/*#__PURE__*/React.createElement(\"span\",{style:{paddingLeft:\"20px\"}},\" \",user.lastName)),\" \",/*#__PURE__*/React.createElement(Divider,{light:true}),/*#__PURE__*/React.createElement(\"div\",{style:{margin:\"auto\",padding:\"29px\"}},/*#__PURE__*/React.createElement(\"span\",{style:{fontWeight:\"bold\"}},\"Username:\"),\" \",/*#__PURE__*/React.createElement(\"span\",{style:{paddingLeft:\"20px\"}},user.username)),\" \",/*#__PURE__*/React.createElement(Divider,{light:true}),/*#__PURE__*/React.createElement(\"div\",{style:{margin:\"auto\",padding:\"29px\"}},/*#__PURE__*/React.createElement(\"span\",{style:{fontWeight:\"bold\"}},\"Email:\"),\" \",/*#__PURE__*/React.createElement(\"span\",{style:{paddingLeft:\"20px\"}},user.email)),\" \",/*#__PURE__*/React.createElement(Divider,{light:true}),/*#__PURE__*/React.createElement(\"div\",{style:{margin:\"auto\",padding:\"29px\"}},/*#__PURE__*/React.createElement(\"span\",{style:{fontWeight:\"bold\"}},\"Address: \"),\" \",/*#__PURE__*/React.createElement(\"span\",{style:{paddingLeft:\"20px\"}},user.address)),\" \",/*#__PURE__*/React.createElement(Divider,{light:true}),/*#__PURE__*/React.createElement(\"div\",{style:{margin:\"auto\",padding:\"29px\"}},/*#__PURE__*/React.createElement(\"span\",{style:{fontWeight:\"bold\"}},\"Phone: \"),\" \",/*#__PURE__*/React.createElement(\"span\",{style:{paddingLeft:\"20px\"}},user.phone)),\" \",/*#__PURE__*/React.createElement(Divider,{light:true}),/*#__PURE__*/React.createElement(\"div\",{style:{margin:\"auto\",padding:\"29px\"}},/*#__PURE__*/React.createElement(\"span\",{style:{fontWeight:\"bold\"}},\" Created date: \"),\" \",/*#__PURE__*/React.createElement(\"span\",{style:{paddingLeft:\"20px\"}},\" \",new Date(user.date).toLocaleDateString(\"en-US\"),\" \",new Date(user.date).toLocaleTimeString(\"en-US\"),\" \")),\" \",/*#__PURE__*/React.createElement(Divider,{light:true}),/*#__PURE__*/React.createElement(\"div\",{style:{margin:\"auto\",padding:\"29px\"}},/*#__PURE__*/React.createElement(\"span\",{style:{fontWeight:\"bold\"}},\"Authorities:\"),user===null||user===void 0?void 0:(_user$authorities=user.authorities)===null||_user$authorities===void 0?void 0:_user$authorities.map(function(auth){return/*#__PURE__*/React.createElement(\"span\",{key:auth.id,style:{paddingLeft:\"20px\"}},/*#__PURE__*/React.createElement(Chip,{color:\"primary\",label:auth.authority,style:{marginLeft:\"10px\"},variant:\"default\"}));}))))));}}]);return UserProfile;}(Component);export default UserProfile;","map":{"version":3,"sources":["/home/xhesina/Desktop/courier-server/src/main/react-app/src/UserActions/userProfile.js"],"names":["React","Component","Wrapper","PersonIcon","Button","Chip","Divider","TextField","Grid","Snackbar","ClearIcon","Fab","axios","UserProfile","props","changePassword","setState","_handleTextFieldChange","e","target","name","value","state","user","oldPassword","newPassWord","confirmPassword","open","vertical","horizontal","message","handleSubmit","bind","event","formData","FormData","append","post","headers","then","response","localStorage","config","Authorization","catch","error","console","log","preventDefault","query","getItem","get","params","username","data","float","padding","width","textAlign","fontSize","color","margin","marginLeft","fontWeight","paddingLeft","firstName","lastName","email","address","phone","Date","date","toLocaleDateString","toLocaleTimeString","authorities","map","auth","id","authority"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport Wrapper from \"../Wrapper\";\nimport PersonIcon from \"@material-ui/icons/Person\";\nimport Button from \"@material-ui/core/Button\";\nimport Chip from \"@material-ui/core/Chip\";\nimport Divider from \"@material-ui/core/Divider\";\nimport TextField from \"@material-ui/core/TextField\";\nimport Grid from \"@material-ui/core/Grid\";\nimport Snackbar from \"@material-ui/core/Snackbar\";\nimport ClearIcon from '@material-ui/icons/Clear';\nimport Fab from \"@material-ui/core/Fab\";\nimport axios from \"axios\";\n\nclass UserProfile extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      user: \"\",\n      oldPassword: \"\",\n      newPassWord: \"\",\n      confirmPassword: \"\",\n      changePassword: false,\n      open: false,\n      vertical: \"top\",\n      horizontal: \"center\",\n      message: \"\",\n    };\n    this.handleSubmit = this.handleSubmit.bind(this);\n    this._handleTextFieldChange = this._handleTextFieldChange.bind(this);\n  }\n  changePassword = () => {\n    this.setState({ changePassword: true });\n  };\n  _handleTextFieldChange = (e) => {\n    this.setState({\n      [e.target.name]: e.target.value,\n    });\n  };\n  handleSubmit(event) {\n    const { oldPassword, newPassWord, confirmPassword } = this.state;\n    if (newPassWord === confirmPassword) {\n    \n      var formData = new FormData();\n      formData.append(\"oldPassword\", oldPassword);\n      formData.append(\"newPassword\", confirmPassword);\n      axios\n        .post(\"/user/updatePassword\", formData, {\n          headers: {\n            \"Content-Type\": \"multipart/form-data\",\n          },\n        })\n        .then((response) => {\n          localStorage[\"token\"] = response.config.headers.Authorization;\n          this.setState({\n            open: true,\n            vertical: \"bottom\",\n            horizontal: \"center\",\n            message: \"Password changed successfully!\",\n          });\n          this.setState({ changePassword: false });\n        })\n        .catch((error) => {\n          console.log(error);\n          this.setState({\n            open: true,\n            vertical: \"bottom\",\n            horizontal: \"center\",\n            message: \"Old password is incorrect!\",\n          });\n        });\n    } else {\n      this.setState({\n        open: true,\n        vertical: \"bottom\",\n        horizontal: \"center\",\n        message: \"Passwords dont match!\",\n      });\n    }\n    event.preventDefault();\n  }\n  componentDidMount() {\n    let query = localStorage.getItem(\"user\");\n    axios\n      .get(\"/user\", {\n        params: {\n          username: query,\n        },\n      })\n      .then((response) => {\n        console.log(response.data);\n        this.setState({ user: response.data });\n      })\n      .catch((error) => {\n        console.log(error);\n      });\n  }\n  render() {\n    const {\n      user,\n      oldPassword,\n      newPassWord,\n      confirmPassword,\n      open,\n      vertical,\n      horizontal,\n      message,\n    } = this.state;\n    return (\n      <div>\n        <Wrapper>\n          {this.state.changePassword ? (\n            <div>\n              <h3>Change password</h3>\n              <Fab\n                style={{ float: \"right\" }}\n                color=\"secondary\"\n                aria-label=\"add\"\n                onClick={() => {\n                  this.setState({ changePassword: !this.state.changePassword });\n                }}\n              >\n                <ClearIcon />\n              </Fab>\n              <form autoComplete=\"off\" onSubmit={this.handleSubmit}>\n                <Grid container spacing={4}>\n                  <Grid item xs={12} sm={12}>\n                    <TextField\n                      style={{ padding: \"10px\", width: \"95%\" }}\n                      type=\"password\"\n                      id=\"standard-secondary\"\n                      label=\"Old password\"\n                      name=\"oldPassword\"\n                      value={oldPassword}\n                      onChange={this._handleTextFieldChange}\n                      color=\"secondary\"\n                      required\n                    />\n                  </Grid>\n                  <Grid item xs={12} sm={12}>\n                    <TextField\n                      style={{ padding: \"10px\", width: \"95%\" }}\n                      type=\"password\"\n                      id=\"standard-secondary\"\n                      label=\"New password\"\n                      name=\"newPassWord\"\n                      value={newPassWord}\n                      onChange={this._handleTextFieldChange}\n                      color=\"secondary\"\n                      required\n                    />\n                  </Grid>\n                  <Grid item xs={12} sm={12}>\n                    <TextField\n                      style={{ padding: \"10px\", width: \"95%\" }}\n                      type=\"password\"\n                      id=\"standard-secondary\"\n                      label=\"Confirm password\"\n                      name=\"confirmPassword\"\n                      value={confirmPassword}\n                      onChange={this._handleTextFieldChange}\n                      color=\"secondary\"\n                      required\n                    />\n                  </Grid>\n                  <Grid item xs={12}>\n                    <Button variant=\"contained\" color=\"secondary\" type=\"submit\">\n                      Submit\n                    </Button>\n                  </Grid>\n                </Grid>\n              </form>\n              <Snackbar\n                anchorOrigin={{ vertical, horizontal }}\n                open={open}\n                message={message}\n                key={vertical + horizontal}\n              />\n            </div>\n          ) : (\n            <div>\n              <Button\n                variant=\"contained\"\n                style={{ float: \"right\" }}\n                color=\"secondary\"\n                onClick={this.changePassword}\n              >\n                Change password\n              </Button>\n              <h3> My profile </h3>\n              <div style={{ textAlign: \"center\" }}>\n                <PersonIcon\n                  style={{\n                    fontSize: \"150px\",\n                    color: \"#e2e0e0\",\n                    margin: \"auto\",\n                  }}\n                />\n              </div>\n              <div style={{ textAlign: \"left\", marginLeft: \"80px\" }}>\n                <div style={{ margin: \"auto\", padding: \"29px\" }}>\n                  <span style={{ fontWeight: \"bold\" }}>First name: </span>{\" \"}\n                  <span style={{ paddingLeft: \"20px\" }}>{user.firstName}</span>{\" \"}\n                </div>{\" \"}\n                <Divider light />\n                <div style={{ margin: \"auto\", padding: \"29px\" }}>\n                  <span style={{ fontWeight: \"bold\" }}>Last name:</span>{\" \"}\n                  <span style={{ paddingLeft: \"20px\" }}> {user.lastName}</span>\n                </div>{\" \"}\n                <Divider light />\n                <div style={{ margin: \"auto\", padding: \"29px\" }}>\n                  <span style={{ fontWeight: \"bold\" }}>Username:</span>{\" \"}\n                  <span style={{ paddingLeft: \"20px\" }}>{user.username}</span>\n                </div>{\" \"}\n                <Divider light />\n                <div style={{ margin: \"auto\", padding: \"29px\" }}>\n                  <span style={{ fontWeight: \"bold\" }}>Email:</span>{\" \"}\n                  <span style={{ paddingLeft: \"20px\" }}>{user.email}</span>\n                </div>{\" \"}\n                <Divider light />\n                <div style={{ margin: \"auto\", padding: \"29px\" }}>\n                  <span style={{ fontWeight: \"bold\" }}>Address: </span>{\" \"}\n                  <span style={{ paddingLeft: \"20px\" }}>{user.address}</span>\n                </div>{\" \"}\n                <Divider light />\n                <div style={{ margin: \"auto\", padding: \"29px\" }}>\n                  <span style={{ fontWeight: \"bold\" }}>Phone: </span>{\" \"}\n                  <span style={{ paddingLeft: \"20px\" }}>{user.phone}</span>\n                </div>{\" \"}\n                <Divider light />\n                <div style={{ margin: \"auto\", padding: \"29px\" }}>\n                  <span style={{ fontWeight: \"bold\" }}> Created date: </span>{\" \"}\n                  <span style={{ paddingLeft: \"20px\" }}>\n                    {\" \"}\n                    {new Date(user.date).toLocaleDateString(\"en-US\")}{\" \"}\n                    {new Date(user.date).toLocaleTimeString(\"en-US\")}{\" \"}\n                  </span>\n                </div>{\" \"}\n                <Divider light />\n                <div style={{ margin: \"auto\", padding: \"29px\" }}>\n                  <span style={{ fontWeight: \"bold\" }}>Authorities:</span>\n                  {user?.authorities?.map((auth) => (\n                    <span key={auth.id} style={{ paddingLeft: \"20px\" }}>\n                      <Chip\n                        color=\"primary\"\n                        label={auth.authority}\n                        style={{ marginLeft: \"10px\" }}\n                        variant=\"default\"\n                      />\n                    </span>\n                  ))}\n                </div>\n              </div>\n            </div>\n          )}\n        </Wrapper>\n      </div>\n    );\n  }\n}\n\nexport default UserProfile;\n"]},"metadata":{},"sourceType":"module"}